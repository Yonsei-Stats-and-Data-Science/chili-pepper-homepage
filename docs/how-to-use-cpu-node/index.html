<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>How to Use GPU Node for SLURM | Chili Pepper</title>
<meta name="keywords" content="" />
<meta name="description" content="How to use CPU node for SLURM Step 1 - terminal ì•± ê³ ë¥´ê¸° UserëŠ” SSHë¡œ proxy nodeì— ì ‘ì†í•˜ì—¬ í´ëŸ¬ìŠ¤í„°ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. í„°ë¯¸ë„ í™˜ê²½ê³¼ vi ì—ë””í„°ì— ìµìˆ™í•œ userëŠ” ìì‹ ì—ê²Œ ì¹œìˆ™í•œ ì•±ì„ ì‚¬ìš©í•˜ë©´ ë©ë‹ˆë‹¤. ê·¸ë ‡ì§€ ì•Šì€ ê²½ìš°, Visual Studio Codeë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ì¶”ì²œí•˜ë©°, ì´ íŠœí† ë¦¬ì–¼ì—ì„œëŠ” Visual Studio Codeë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ì „ì œë¡œ í•©ë‹ˆë‹¤. ì¶”ì²œ ì´ìœ ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.
 Windows, MacOS, Linuxì—ì„œ ëª¨ë‘ ì‚¬ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤. Web Versionë„ ìˆê¸° ë•Œë¬¸ì— ëª¨ë°”ì¼ ë””ë°”ì´ìŠ¤ì—ì„œë„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë˜í•œ í„°ë¯¸ë„ê³¼ ì—ë””í„°, íŒŒì¼ ë¸Œë¼ìš°ì €ê°€ í†µí•©ë˜ì–´ ìˆê¸° ë•Œë¬¸ì— ë¶ˆí¸í•˜ê²Œ vië‚˜ nanoë“±ì˜ CUI ê¸°ë°˜ í…ìŠ¤íŠ¸ ì—ë””í„°ë¥¼ ì‚¬ìš©í•  í•„ìš”ê°€ ì—†ìœ¼ë©°, íŒŒì¼ ì „ì†¡ë„ scpë“±ì˜ ë³µì¡í•œ í”„ë¡œí† ì½œì„ ì‚¬ìš©í•  í•„ìš” ì—†ì´ drag &amp; dropìœ¼ë¡œ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.">
<meta name="author" content="Jongmin Mun">
<link rel="canonical" href="https://hpc.stat.yonsei.ac.kr/docs/how-to-use-cpu-node/" />
<meta name="google-site-verification" content="XYZabc" />
<link crossorigin="anonymous" href="/assets/css/stylesheet.min.c88963fe2d79462000fd0fb1b3737783c32855d340583e4523343f8735c787f0.css" integrity="sha256-yIlj/i15RiAA/Q&#43;xs3N3g8MoVdNAWD5FIzQ/hzXHh/A=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js" integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5&#43;kdJvBz5iKbt6B5PJI="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://hpc.stat.yonsei.ac.kr/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://hpc.stat.yonsei.ac.kr/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://hpc.stat.yonsei.ac.kr/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://hpc.stat.yonsei.ac.kr/apple-touch-icon.png">
<link rel="mask-icon" href="https://hpc.stat.yonsei.ac.kr/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<meta name="generator" content="Hugo 0.91.2" />
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript><meta property="og:title" content="How to Use GPU Node for SLURM" />
<meta property="og:description" content="How to use CPU node for SLURM Step 1 - terminal ì•± ê³ ë¥´ê¸° UserëŠ” SSHë¡œ proxy nodeì— ì ‘ì†í•˜ì—¬ í´ëŸ¬ìŠ¤í„°ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. í„°ë¯¸ë„ í™˜ê²½ê³¼ vi ì—ë””í„°ì— ìµìˆ™í•œ userëŠ” ìì‹ ì—ê²Œ ì¹œìˆ™í•œ ì•±ì„ ì‚¬ìš©í•˜ë©´ ë©ë‹ˆë‹¤. ê·¸ë ‡ì§€ ì•Šì€ ê²½ìš°, Visual Studio Codeë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ì¶”ì²œí•˜ë©°, ì´ íŠœí† ë¦¬ì–¼ì—ì„œëŠ” Visual Studio Codeë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ì „ì œë¡œ í•©ë‹ˆë‹¤. ì¶”ì²œ ì´ìœ ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.
 Windows, MacOS, Linuxì—ì„œ ëª¨ë‘ ì‚¬ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤. Web Versionë„ ìˆê¸° ë•Œë¬¸ì— ëª¨ë°”ì¼ ë””ë°”ì´ìŠ¤ì—ì„œë„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë˜í•œ í„°ë¯¸ë„ê³¼ ì—ë””í„°, íŒŒì¼ ë¸Œë¼ìš°ì €ê°€ í†µí•©ë˜ì–´ ìˆê¸° ë•Œë¬¸ì— ë¶ˆí¸í•˜ê²Œ vië‚˜ nanoë“±ì˜ CUI ê¸°ë°˜ í…ìŠ¤íŠ¸ ì—ë””í„°ë¥¼ ì‚¬ìš©í•  í•„ìš”ê°€ ì—†ìœ¼ë©°, íŒŒì¼ ì „ì†¡ë„ scpë“±ì˜ ë³µì¡í•œ í”„ë¡œí† ì½œì„ ì‚¬ìš©í•  í•„ìš” ì—†ì´ drag &amp; dropìœ¼ë¡œ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://hpc.stat.yonsei.ac.kr/docs/how-to-use-cpu-node/" /><meta property="article:section" content="docs" />
<meta property="article:published_time" content="2022-03-15T14:54:35&#43;09:00" />
<meta property="article:modified_time" content="2022-03-15T14:54:35&#43;09:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="How to Use GPU Node for SLURM"/>
<meta name="twitter:description" content="How to use CPU node for SLURM Step 1 - terminal ì•± ê³ ë¥´ê¸° UserëŠ” SSHë¡œ proxy nodeì— ì ‘ì†í•˜ì—¬ í´ëŸ¬ìŠ¤í„°ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. í„°ë¯¸ë„ í™˜ê²½ê³¼ vi ì—ë””í„°ì— ìµìˆ™í•œ userëŠ” ìì‹ ì—ê²Œ ì¹œìˆ™í•œ ì•±ì„ ì‚¬ìš©í•˜ë©´ ë©ë‹ˆë‹¤. ê·¸ë ‡ì§€ ì•Šì€ ê²½ìš°, Visual Studio Codeë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ì¶”ì²œí•˜ë©°, ì´ íŠœí† ë¦¬ì–¼ì—ì„œëŠ” Visual Studio Codeë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ì „ì œë¡œ í•©ë‹ˆë‹¤. ì¶”ì²œ ì´ìœ ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.
 Windows, MacOS, Linuxì—ì„œ ëª¨ë‘ ì‚¬ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤. Web Versionë„ ìˆê¸° ë•Œë¬¸ì— ëª¨ë°”ì¼ ë””ë°”ì´ìŠ¤ì—ì„œë„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë˜í•œ í„°ë¯¸ë„ê³¼ ì—ë””í„°, íŒŒì¼ ë¸Œë¼ìš°ì €ê°€ í†µí•©ë˜ì–´ ìˆê¸° ë•Œë¬¸ì— ë¶ˆí¸í•˜ê²Œ vië‚˜ nanoë“±ì˜ CUI ê¸°ë°˜ í…ìŠ¤íŠ¸ ì—ë””í„°ë¥¼ ì‚¬ìš©í•  í•„ìš”ê°€ ì—†ìœ¼ë©°, íŒŒì¼ ì „ì†¡ë„ scpë“±ì˜ ë³µì¡í•œ í”„ë¡œí† ì½œì„ ì‚¬ìš©í•  í•„ìš” ì—†ì´ drag &amp; dropìœ¼ë¡œ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Docs",
      "item": "https://hpc.stat.yonsei.ac.kr/docs/"
    }, 
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "How to Use GPU Node for SLURM",
      "item": "https://hpc.stat.yonsei.ac.kr/docs/how-to-use-cpu-node/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "How to Use GPU Node for SLURM",
  "name": "How to Use GPU Node for SLURM",
  "description": "How to use CPU node for SLURM Step 1 - terminal ì•± ê³ ë¥´ê¸° UserëŠ” SSHë¡œ proxy nodeì— ì ‘ì†í•˜ì—¬ í´ëŸ¬ìŠ¤í„°ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. í„°ë¯¸ë„ í™˜ê²½ê³¼ vi ì—ë””í„°ì— ìµìˆ™í•œ userëŠ” ìì‹ ì—ê²Œ ì¹œìˆ™í•œ ì•±ì„ ì‚¬ìš©í•˜ë©´ ë©ë‹ˆë‹¤. ê·¸ë ‡ì§€ ì•Šì€ ê²½ìš°, Visual Studio Codeë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ì¶”ì²œí•˜ë©°, ì´ íŠœí† ë¦¬ì–¼ì—ì„œëŠ” Visual Studio Codeë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ì „ì œë¡œ í•©ë‹ˆë‹¤. ì¶”ì²œ ì´ìœ ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.\n Windows, MacOS, Linuxì—ì„œ ëª¨ë‘ ì‚¬ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤. Web Versionë„ ìˆê¸° ë•Œë¬¸ì— ëª¨ë°”ì¼ ë””ë°”ì´ìŠ¤ì—ì„œë„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë˜í•œ í„°ë¯¸ë„ê³¼ ì—ë””í„°, íŒŒì¼ ë¸Œë¼ìš°ì €ê°€ í†µí•©ë˜ì–´ ìˆê¸° ë•Œë¬¸ì— ë¶ˆí¸í•˜ê²Œ vië‚˜ nanoë“±ì˜ CUI ê¸°ë°˜ í…ìŠ¤íŠ¸ ì—ë””í„°ë¥¼ ì‚¬ìš©í•  í•„ìš”ê°€ ì—†ìœ¼ë©°, íŒŒì¼ ì „ì†¡ë„ scpë“±ì˜ ë³µì¡í•œ í”„ë¡œí† ì½œì„ ì‚¬ìš©í•  í•„ìš” ì—†ì´ drag \u0026amp; dropìœ¼ë¡œ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
  "keywords": [
    
  ],
  "articleBody": "How to use CPU node for SLURM Step 1 - terminal ì•± ê³ ë¥´ê¸° UserëŠ” SSHë¡œ proxy nodeì— ì ‘ì†í•˜ì—¬ í´ëŸ¬ìŠ¤í„°ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. í„°ë¯¸ë„ í™˜ê²½ê³¼ vi ì—ë””í„°ì— ìµìˆ™í•œ userëŠ” ìì‹ ì—ê²Œ ì¹œìˆ™í•œ ì•±ì„ ì‚¬ìš©í•˜ë©´ ë©ë‹ˆë‹¤. ê·¸ë ‡ì§€ ì•Šì€ ê²½ìš°, Visual Studio Codeë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ì¶”ì²œí•˜ë©°, ì´ íŠœí† ë¦¬ì–¼ì—ì„œëŠ” Visual Studio Codeë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ì „ì œë¡œ í•©ë‹ˆë‹¤. ì¶”ì²œ ì´ìœ ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.\n Windows, MacOS, Linuxì—ì„œ ëª¨ë‘ ì‚¬ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤. Web Versionë„ ìˆê¸° ë•Œë¬¸ì— ëª¨ë°”ì¼ ë””ë°”ì´ìŠ¤ì—ì„œë„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë˜í•œ í„°ë¯¸ë„ê³¼ ì—ë””í„°, íŒŒì¼ ë¸Œë¼ìš°ì €ê°€ í†µí•©ë˜ì–´ ìˆê¸° ë•Œë¬¸ì— ë¶ˆí¸í•˜ê²Œ vië‚˜ nanoë“±ì˜ CUI ê¸°ë°˜ í…ìŠ¤íŠ¸ ì—ë””í„°ë¥¼ ì‚¬ìš©í•  í•„ìš”ê°€ ì—†ìœ¼ë©°, íŒŒì¼ ì „ì†¡ë„ scpë“±ì˜ ë³µì¡í•œ í”„ë¡œí† ì½œì„ ì‚¬ìš©í•  í•„ìš” ì—†ì´ drag \u0026 dropìœ¼ë¡œ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  í„°ë¯¸ë„ì—ì„œ ssh ì ‘ì†ë§Œ í•  ìˆ˜ ìˆë‹¤ë©´ ì–´ë–¤ ê¸°ê¸°ì—ì„œë„ proxy nodeì— ì ‘ì†í•˜ì—¬ ì‘ì—…ì„ ì œì¶œí•  ìˆ˜ ìˆìœ¼ë©°, í„°ë¯¸ë„ì´ ì¢…ë£Œë˜ì–´ë„ ì‘ì—…ì€ ê³„ì† ì‹¤í–‰ë©ë‹ˆë‹¤. Standard output(Python, Rì—ì„œ consoleì— ì¶œë ¥ë˜ëŠ” ë©”ì‹œì§€)ê°€ ë¡œê·¸ íŒŒì¼ì— ê¸°ë¡ë˜ë¯€ë¡œ, ë‚˜ì¤‘ì— ë‹¤ì‹œ í„°ë¯¸ë„ì— ì ‘ì†í•˜ì—¬ job ì‹¤í–‰ í˜„í™©ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\nVisual Studio Codeì™¸ì— ë‹¤ë¥¸ ì•±ì„ ì‚¬ìš©í•˜ì‹¤ ê²½ìš° ì¶”ì²œí•˜ëŠ” ì•±ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.\n Windows 10: PowerShellë³´ë‹¤ëŠ” Windows Terminalë¥¼ ì¶”ì²œí•©ë‹ˆë‹¤. MacOS: ê¸°ë³¸ í„°ë¯¸ë„ì„ ì‚¬ìš©í•´ë„ ë˜ì§€ë§Œ, iTerm2ë¥¼ ì¶”ì²œí•©ë‹ˆë‹¤. iOS: Blink Android: Termux  Step 2 - proxy node SSH ì ‘ì† 1. Visual Studio Code extensionsì—ì„œ Remote Development ì„¤ì¹˜fn^3 Microsoftê°€ ì œê³µí•˜ëŠ” Remote Development extension packì„ ì„¤ì¹˜í•©ë‹ˆë‹¤. Remote-WSL, Remote-Containers, Remote-SSHê°€ ìë™ì ìœ¼ë¡œ ê°™ì´ ì„¤ì¹˜ë©ë‹ˆë‹¤. 2. Remote Explorerì—ì„œ SSH Targetsë¥¼ ì„ íƒ í›„, Add New í´ë¦­ 3. ssh ì ‘ì† ì»¤ë§¨ë“œ ì…ë ¥ ì•„ë˜ì™€ ê°™ì€ ì°½ì´ ëœ¨ë©´ ssh ì»¤ë§¨ë“œë¥¼ ì…ë ¥í•˜ì—¬ proxy nodeì— ì ‘ì†í•©ë‹ˆë‹¤. ì•„ë˜ ì½”ë“œì— Slackìœ¼ë¡œ ì•ˆë‚´ë°›ì€ ip, port, usernameì„ ë„£ì–´ì„œ ìœ„ ì°½ì— ì…ë ¥í•˜ê³  Enterí‚¤ë¥¼ ëˆ„ë¥´ë©´ ë©ë‹ˆë‹¤. SSHì˜ default portëŠ” 22ì´ì§€ë§Œ, ì €í¬ì˜ í´ëŸ¬ìŠ¤í„°ëŠ” ë³´ì•ˆìƒ ì´ìœ ë¡œ ë‹¤ë¥¸ portë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.\n1  ssh -p [port] [username]@[ip]   4. SSH configuration fileì„ ì €ì¥í•  ì¥ì†Œ ì„ íƒ Select SSH configuration file to updateê°€ ë‚˜ì˜¤ë©´ ë§¨ ìœ„ í•­ëª©ì„ ì„ íƒí•©ë‹ˆë‹¤. Host added! ë¼ëŠ” ë©”ì‹œì§€ê°€ ìš°ì¸¡ í•˜ë‹¨ì— ë‚˜ì˜µë‹ˆë‹¤. 5. Remote Exploreì—ì„œ Connect to Host in New Window ì„ íƒ 6. ì„œë²„ Platform ì„ íƒ Linuxë¥¼ ì„ íƒí•©ë‹ˆë‹¤. 7. Password ì…ë ¥ ì•ˆë‚´ë°›ì€ passwordë¥¼ ì…ë ¥í•˜ì—¬ ë¡œê·¸ì¸í•©ë‹ˆë‹¤. 8. íŒŒì¼ ì‹œìŠ¤í…œ ë§ˆìš´íŠ¸ ì¢Œì¸¡ íƒ­ì˜ íŒŒì¼ ëª¨ì–‘ ì•„ì´ì½˜ì„ í´ë¦­í•˜ê³  Open Folder ë²„íŠ¼ì„ í´ë¦­í•©ë‹ˆë‹¤. ê¸°ë³¸ì ìœ¼ë¡œ user home directory ê²½ë¡œê°€ ì…ë ¥ë˜ì–´ ìˆìŠµë‹ˆë‹¤. OKë¥¼ ëˆ„ë¦…ë‹ˆë‹¤. 9. ë‘˜ëŸ¬ë³´ê¸°   ì¢Œì¸¡ file explorerì—ì„œ íŒŒì¼ì„ ê´€ë¦¬í•©ë‹ˆë‹¤. Windows íƒìƒ‰ê¸°ë‚˜ MacOS Finderì—ì„œ drag\u0026dropìœ¼ë¡œ íŒŒì¼ì„ ì˜®ê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤. í´ëŸ¬ìŠ¤í„° ë‚´ë¶€ì˜ íŒŒì¼ì„ userì˜ local ì»´í“¨í„°ë¡œ ê°€ì ¸ì˜¤ëŠ” ê²ƒë„ drag\u0026dropìœ¼ë¡œ ê°€ëŠ¥í•©ë‹ˆë‹¤.\n  ctrl + shift + ~í‚¤ë¥¼ ëˆ„ë¥´ë©´ í„°ë¯¸ë„ì´ ì—´ë¦½ë‹ˆë‹¤. ì—¬ê¸°ì„œ ì„œë²„ ì‚¬ìš©ì— í•„ìš”í•œ ì»¤ë§¨ë“œë¥¼ ì…ë ¥í•©ë‹ˆë‹¤.\n  text editorì—ì„œ ì½”ë“œì™€ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ìˆ˜ì •í•˜ê³  ì´ë¯¸ì§€ íŒŒì¼ ë“±ì„ ì—´ëŒí•©ë‹ˆë‹¤.\n  Step 3 - íŒŒì¼ ì‹œìŠ¤í…œ êµ¬ì¡° ì´í•´ NAS(Network Attached Storage)ì— ê° userì˜ home directoryê°€ ìˆìŠµë‹ˆë‹¤. NASëŠ” ëª¨ë“  nodeì— ë§ˆìš´íŠ¸ë˜ì–´ ìˆìœ¼ë©°, ëª¨ë“  nodeì—ì„œ userëª…ê³¼ groupëª… ë° ê´€ë ¨ ì„¤ì •ì´ ë™ì¼í•©ë‹ˆë‹¤. Userëª…ì€ ì»´í“¨íŒ… í´ëŸ¬ìŠ¤í„° ì‚¬ìš© ì‹ ì²­ì‹œ ì œì¶œí•˜ì‹  ì´ë©”ì¼ ì£¼ì†Œì˜ @ ì• ë¶€ë¶„ê³¼ ë™ì¼í•©ë‹ˆë‹¤.\nUser home directoryì˜ prefixëŠ” /mnt/nas/users/ì…ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, dummyuserë¼ëŠ” userì˜ home directoryì˜ ê²½ë¡œëŠ” /mnt/nas/users/dummyuser/ì…ë‹ˆë‹¤. ë‹¤ë¥¸ userì˜ home directoryë¥¼ ì—´ëŒí•  ìˆ˜ ì—†ë„ë¡ ê¶Œí•œì„¤ì •ì´ ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ê° userëŠ” ë°ì´í„°ì™€ ì½”ë“œ, ì„¤ì • íŒŒì¼ ë“±ì„ ìì‹ ì˜ home directory ë‚´ì— ì €ì¥í•©ë‹ˆë‹¤.\n Linuxì—ì„œ directoryë¥¼ ì´ë™í•˜ëŠ” ëª…ë ¹ì–´ëŠ” cdì…ë‹ˆë‹¤. home directoryë¥¼ ë‚˜íƒ€ë‚´ëŠ” ê¸°í˜¸ëŠ” ~ì…ë‹ˆë‹¤. í˜„ì¬ directoryë¥¼ í™•ì¸í•˜ëŠ” ëª…ë ¹ì–´ëŠ” pwdì…ë‹ˆë‹¤ íŒŒì¼ ëª©ë¡ì„ í™•ì¸í•˜ëŠ” ëª…ë ¹ì–´ëŠ” lsì…ë‹ˆë‹¤.  ë”°ë¼ì„œ userëŠ” proxy nodeì•„ë˜ì˜ ëª…ë ¹ì–´ë¥¼ í†µí•´ ìì‹ ì˜ í™ˆ directoryë¡œ ì´ë™í•´ ê·¸ ì•ˆì— ìˆëŠ” íŒŒì¼ ëª©ë¡ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n1 2  cd ~ ls   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20  # with the tree command the home directory will typically look like this /mnt/nas/users/dummyuser/ â”œâ”€â”€ .bash_history â”œâ”€â”€ .bash_logout â”œâ”€â”€ .bashrc â”œâ”€â”€ .conda â”œâ”€â”€ .config â”œâ”€â”€ GettingStarted.md â”œâ”€â”€ .gnupg â”œâ”€â”€ .ipynb_checkpoints â”œâ”€â”€ .ipython â”œâ”€â”€ .jupyter â”œâ”€â”€ .local â”œâ”€â”€ logs â”œâ”€â”€ .npm â”œâ”€â”€ .profile â”œâ”€â”€ .python_history â”œâ”€â”€ some_script.sh â”œâ”€â”€ .ssh â””â”€â”€ .viminfo   Step 3 - Data Transfer íŒŒì¼ì„ ì˜®ê¸¸ ë•Œì—ëŠ” í¬ê²Œ â€˜SCPâ€™ì™€ â€˜Gitâ€™ ë‘ ê°€ì§€ ë°©ë²•ì´ ìˆìŠµë‹ˆë‹¤.\në°©ë²• 1. scp scpëŠ” SSHì™€ ê°™ì€ portë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. ì•„ë˜ ì»¤ë§¨ë“œë¥¼ ì´ìš©í•´ íŒŒì¼ì„ ë³´ë‚´ê³  ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. dummyuserë¥¼ ë³¸ì¸ì˜ userëª…ìœ¼ë¡œ ë°”ê¾¸ê³  íŒŒì¼ëª…, directoryëª…ì„ ì ì ˆíˆ ë°”ê¾¸ë©´ ë©ë‹ˆë‹¤.\nSending a local file(some_file.txt) to the remote home directory 1  scp -P [port] some_file.txt dummyuser@hpc.stat.yonsei.ac.kr:~/   Sending a local directory(some_files/) to the remote home directory 1 2  scp -P [port] -r some_files dummyuser@hpc.stat.yonsei.ac.kr:~/ # /mnt/nas/users/dummyuser/some_files/ will be created   Recieving a remote file(some_file.txt) in the home directory to the current local directory 1  scp -P [port] dummyuser@hpc.stat.yonsei.ac.kr:~/some_file.txt   Recieving a remote directory(/mnt/nas/users/dummyuser/some_files) in the home directory to the current local directory 1  scp -P [port] -r dummyuser@hpc.stat.yonsei.ac.kr:~/some_files ./   ì´ ì™¸ì˜ scp ì˜µì…˜ë“¤ì€ ì—¬ê¸°ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\nìœˆë„ìš°ì—ì„œëŠ” winscp ë¥¼ ì´ìš©í•´ scpë¥¼ drag \u0026 dropìœ¼ë¡œ í¸ë¦¬í•˜ê²Œ ì´ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\nMacOSì—ì„œëŠ” filezillaë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ì— ëŒ€í•œ ì•ˆë‚´ëŠ” ë³„ë„ì˜ ê¸€ë¡œ ì‘ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤.\në°©ë²• 2. Git Gitì´ ì´ë¯¸ ì„¤ì¹˜ë˜ì–´ ìˆìœ¼ë¯€ë¡œ, í´ëŸ¬ìŠ¤í„° ë‚´ ì ì ˆí•œ directoryì—ì„œ git cloneì„ ì‚¬ìš©í•©ë‹ˆë‹¤.\nStep 4. Conda environment ìƒì„±  cpu-compute nodeì—ëŠ” conda version 4.11.0ì´ ì„¤ì¹˜ë˜ì–´ ìˆìœ¼ë©° Python versionì„ 3.10ê¹Œì§€ ì§€ì›í•©ë‹ˆë‹¤fn^1. gpu-compute nodeì—ëŠ” conda version 4.6.14ê°€ ì„¤ì¹˜ë˜ì–´ ìˆìœ¼ë©° Python versionì„ 3.8ê¹Œì§€ ì§€ì›í•©ë‹ˆë‹¤.  ì—¬ê¸°ì„œëŠ” cpu-compute nodeì—ì„œ conda environmentë¥¼ ìƒì„±í•˜ëŠ” ë°©ë²•ì„ ì„¤ëª…í•©ë‹ˆë‹¤. localì—ì„œ ì‘ì„±í•œ ì½”ë“œê°€ cpu-compute nodeì—ì„œ ì˜¤ë¥˜ ì—†ì´ ì‘ë™í•˜ë„ë¡ í•˜ê¸° ìœ„í•´, localê³¼ cpu-compute nodeì—ì„œ ë™ì¼í•œ conda environmentë¥¼ êµ¬ì¶•í•´ì•¼ í•©ë‹ˆë‹¤.\n1. localì—ì„œ conda environment ìƒì„± ì´ ì„¹ì…˜ì˜ ì‘ì—…ì€ ëª¨ë‘ userì˜ local ì»´í“¨í„°ì—ì„œ ì§„í–‰í•©ë‹ˆë‹¤.\nminicondaë¥¼ ì„¤ì¹˜í•œ ë‹¤ìŒ, local ì»´í“¨í„°ì˜ í„°ë¯¸ë„ì—ì„œ ì•„ë˜ ì»¤ë§¨ë“œë¡œ virtual environmentë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. testEnv ìë¦¬ì— ì›í•˜ëŠ” ì´ë¦„ì„ ë„£ê³ , python= ë’¤ì— ì‚¬ìš©í•  Python versionì„ ëª…ì‹œí•©ë‹ˆë‹¤.\n1  conda create -n testEnv python=3.6   ì„±ê³µì ìœ¼ë¡œ ìƒì„±ë˜ë©´ ì•„ë˜ì™€ ê°™ì€ ê²°ê³¼ê°€ ë‚˜ì˜µë‹ˆë‹¤.\n1 2 3 4 5 6 7 8 9 10 11  Preparing transaction: done Verifying transaction: done Executing transaction: done # # To activate this environment, use # # $ conda activate testEnv # # To deactivate an active environment, use # # $ conda deactivate   ì•„ë˜ ì»¤ë§¨ë“œë¥¼ í†µí•´ virtual environmentê°€ ì œëŒ€ë¡œ ìƒì„±ë˜ì—ˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.\n1  conda info --env   1 2 3 4  # conda environments: # base * /opt/miniconda3 testEnv /opt/miniconda3/envs/testEnv   Virtual environmentì— ì§„ì…í•œ ë’¤ íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•©ë‹ˆë‹¤. pipë¡œ ì„¤ì¹˜ë˜ëŠ” íŒ¨í‚¤ì§€ë“¤ì€ condaë¡œ ì„¤ì¹˜ëœ íŒ¨í‚¤ì§€ì— ëŒ€í•œ ì •ë³´ë¥¼ ëª¨ë¥´ê¸° ë•Œë¬¸ì— ì˜ì¡´ì„± ì¶©ëŒì´ ë°œìƒí•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ condaë§Œì„ ì‚¬ìš©í•´ì„œ ì„¤ì¹˜í•˜ì‹¤ ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤. anaconda ì›¹ì‚¬ì´íŠ¸ì—ì„œ íŒ¨í‚¤ì§€ëª…ì„ ê²€ìƒ‰í•´ì„œ linux-64ë¥¼ ì§€ì›í•˜ëŠ” ë²„ì „ì´ ì–´ë””ê¹Œì§€ì¸ì§€ë¥¼ í™•ì¸í•˜ê³  ì„¤ì¹˜í•˜ëŠ” ê²ƒì„ ì¶”ì²œí•©ë‹ˆë‹¤. ìœ„ ì‚¬ì´íŠ¸ëŠ” ì„¤ì¹˜ ì»¤ë§¨ë“œë„ ì œê³µí•©ë‹ˆë‹¤. ì—¬ëŸ¬ íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•  ê²½ìš° í•œ ì»¤ë§¨ë“œ ë‚´ì— ëª…ì‹œí•˜ë©´ condaê°€ ìë™ìœ¼ë¡œ dependency ì¶©ëŒì„ ê²€ì‚¬í•´ ì¤ë‹ˆë‹¤.\n1 2 3 4  conda activate testEnv #For example, conda install -c conda-forge lightgbm==2.0.7 scikit-learn matplotlib keras   ë˜ëŠ” userê°€ ì‚¬ìš©í•  ì¤‘ìš”í•œ íŒ¨í‚¤ì§€ë“¤ì´ ìˆì„ ê²½ìš° environmentë¥¼ ìƒì„±í•  ë•Œ ì‚¬ìš©í•  íŒ¨í‚¤ì§€ ëª©ë¡ì„ ì§€ì •í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ì•„ë˜ ì»¤ë§¨ë“œë¡œ ì„¤ì¹˜ëœ íŒ¨í‚¤ì§€ ëª©ë¡ì„ í™•ì¸í•©ë‹ˆë‹¤.\n1  conda list   Environmentë¥¼ ì§€ìš°ë ¤ë©´ ì•„ë˜ ì»¤ë§¨ë“œë¥¼ ì…ë ¥í•©ë‹ˆë‹¤.\n1  conda remove --name testEnv --all   2. cpu-compute nodeì— localê³¼ ë™ì¼í•œ conda environment êµ¬ì¶•í•˜ê¸° conda env export ì»¤ë§¨ë“œë¥¼ ì´ìš©í•´ environment ì „ì²´ë¥¼ .yml íŒŒì¼ë¡œ ë§Œë“¤ê³  ì´ë¥¼ ì´ìš©í•´ cpu-compute ë…¸ë“œì—ì„œ environmentë¥¼ êµ¬ì¶•í•˜ëŠ” ê²ƒì´ ë™ì¼í•œ environmentë¥¼ ë§Œë“œëŠ” ê°€ì¥ ì´ìƒì ì¸ ë°©ë²•ì…ë‹ˆë‹¤. ë˜ëŠ” ì„¤ì¹˜ëœ íŒ¨í‚¤ì§€ ëª©ë¡ê³¼ ë²„ì „ë§Œì„ requirements.txtë¡œ ì¶”ì¶œí•˜ì—¬ ë…¸ë“œì—ì„œ cpu-computeì—ì„œ ì„¤ì¹˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ì´ ë‘ ë°©ë²•ì€ userì˜ local ì»´í“¨í„°ê°€ linuxê°€ ì•„ë‹ˆë©´ ì˜¤ë¥˜ê°€ ë°œìƒí•  í™•ë¥ ì´ ë§¤ìš° ë†’ìŠµë‹ˆë‹¤. ì´ëŠ” ìœ ì €ê°€ íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•  ë•Œ ìë™ìœ¼ë¡œ ì„¤ì¹˜ë˜ëŠ” dependencyë“¤ì˜ ë²„ì „ì´ OSë³„ë¡œ ë‹¤ë¥¼ ìˆ˜ ìˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ lightgbm 2.0.7ë²„ì „ì€ Python ë²„ì „ì´ 3.6ì¼ ë•Œ linuxì™€ MacOSì—ì„œ ë‘˜ ë‹¤ ì„¤ì¹˜ ê°€ëŠ¥í•˜ì§€ë§Œ, ì´ íŒ¨í‚¤ì§€ì˜ dependency ì¤‘ í•˜ë‚˜ì¸ libgfortranì€ MacOSì—ì„œëŠ” 4.0.0ë²„ì „ì´ ì„¤ì¹˜ë˜ì§€ë§Œ linuxì—ì„œëŠ” 3.0.0ë²„ì „ê¹Œì§€ë§Œ ì§€ì›ë˜ê¸° ë•Œë¬¸ì— MacOSì—ì„œ ë§Œë“  environmentì—ì„œ ì¶”ì¶œí•œ yml íŒŒì¼ì´ë‚˜ list txt íŒŒì¼ì„ í´ëŸ¬ìŠ¤í„°ì—ì„œ ì‚¬ìš©í•˜ë©´ ì˜¤ë¥˜ê°€ ë°œìƒí•©ë‹ˆë‹¤[^fn2]. ì´ ì˜¤ë¥˜ëŠ” ì ì ˆí•œ ì¡°ì¹˜ë¥¼ í†µí•´ í•´ê²°í•  ìˆ˜ ìˆì„ ë•Œë„ ìˆì§€ë§Œ í•´ê²°í•˜ê¸° í˜ë“¤ ë•Œë„ ìˆìŠµë‹ˆë‹¤.\në”°ë¼ì„œ localì—ì„œ ë§Œë“  environmentë¥¼ clusterë¡œ ì˜®ê¸°ê¸°ë³´ë‹¤ëŠ”, localì˜ environmentì—ì„œ ì‚¬ìš©í•˜ëŠ” Python ë²„ì „ê³¼ ì¤‘ìš” íŒ¨í‚¤ì§€ë“¤ì˜ ë²„ì „ì„ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•˜ì—¬ cluster ë‚´ì—ì„œ environmentë¥¼ ìƒì„±í•˜ëŠ” ê²ƒì„ ì¶”ì²œí•˜ë©°, ì´ ë¬¸ì„œì—ì„œëŠ” ê·¸ ì ˆì°¨ë¥¼ ì•ˆë‚´í•©ë‹ˆë‹¤.\n  Conda environment ìƒì„± batch scriptë¥¼ ì‘ì„±í•©ë‹ˆë‹¤.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15  #!/bin/bash #SBATCH --job-name=conda-env-create #SBATCH --nodes=1 #SBATCH --mem=4gb #SBATCH --partition=all #SBATCH --nodelist=cpu-compute #SBATCH --output=testEnv.out #SBATCH --error=testEnv.err CONDA_BIN_PATH=/opt/miniconda/bin ENV_NAME=testEnv #localì—ì„œì™€ ê°™ì€ ì´ë¦„ìœ¼ë¡œ ì…ë ¥ ENV_PATH=/mnt/nas/users/$(whoami)/.conda/envs/$ENV_NAME $CONDA_BIN_PATH/conda env remove --prefix $ENV_PATH $CONDA_BIN_PATH/conda create -y --prefix $ENV_PATH python=3.6 source $CONDA_BIN_PATH/activate $ENV_PATH conda install -c conda-forge lightgbm==2.0.7 scikit-learn matplotlib keras pandas numpy   ìœ„ ë‚´ìš©ì—ì„œ\n 7ë²ˆ ë¼ì¸ì˜ #SBATCH â€“output=testEnv.outì˜ output log íŒŒì¼ëª… 8ë²ˆ ë¼ì¸ì˜ #SBATCH â€“error=testEnv.errì˜ error log íŒŒì¼ëª… 10ë²ˆ ë¼ì¸ì˜ environment name 13ë²ˆ ë¼ì¸ì˜ python version 14ë²ˆ ë¼ì¸ì˜ íŒ¨í‚¤ì§€ ì„¤ì¹˜ ì»¤ë§¨ë“œ ë¥¼ ì•Œë§ê²Œ ìˆ˜ì •í•œ ë’¤ localì—ì„œ testEnv.shë¡œ ì €ì¥í•˜ì—¬ scpë¡œ í´ëŸ¬ìŠ¤í„° ë‚´ user home directoryë¡œ ì „ì†¡í•©ë‹ˆë‹¤. ë˜ëŠ” proxy nodeì— ì ‘ì†í•œ ë’¤ home directoryì—ì„œ  1  vi testEnv.sh   ë¥¼ ì…ë ¥í•˜ì—¬ linuxì˜ í…ìŠ¤íŠ¸ ì—ë””í„°ë¥¼ ì‹¤í–‰í•œ ë’¤ ctrl+vë¡œ ìœ„ ë‚´ìš©ì„ ë¶™ì—¬ë„£ê¸°í•˜ê³  esc, :wq, ENTERë¥¼ ì°¨ë¡€ë¡œ ëˆŒëŸ¬ ì €ì¥í•©ë‹ˆë‹¤.\n  ì‘ì„±í•œ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰í•˜ê¸°. proxy nodeì— SSHì ‘ì†í•œ ë’¤ home directoryì—ì„œ\n1  sbatch testEnv.sh   ë¥¼ ì…ë ¥í•´ slurm batch job submissionì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. ì‘ì—…ì´ ë…¸ë“œì—ì„œ ì„±ê³µì ìœ¼ë¡œ ì‹¤í–‰ë˜ë©´\n1  Submitted batch job 401   ì™€ ê°™ì€ ë©”ì‹œì§€ê°€ ëœ¨ê³  job ë²ˆí˜¸ê°€ í• ë‹¹ë©ë‹ˆë‹¤.\n1  squeue   ì»¤ë§¨ë“œë¥¼ í†µí•´ ì‘ì—… ì‹¤í–‰ í˜„í™©ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n1 2  JOBID PARTITION NAME USER ST TIME NODES NODELIST(REASON) 402 all conda-en mjm R 0:01 1 cpu-compute   ë˜ëŠ” ì•„ë˜ ì»¤ë§¨ë“œë¥¼ í†µí•´ ì‹¤ì‹œê°„ìœ¼ë¡œ ì‘ì—… ì‹¤í–‰ í˜„í™©ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n1  smap -i 1   ë‹¤ìŒ ì»¤ë§¨ë“œë¥¼ í†µí•´ output log, error logíŒŒì¼ì˜ ë‚´ìš©ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n1  cat testEnv.err   error log ë˜ëŠ” output logëŠ” ë‹¤ìŒ ì»¤ë§¨ë“œë¥¼ í†µí•´ ì‹¤ì‹œê°„ìœ¼ë¡œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n1  tail -f testEnv.out     Step 2. make env file and upload file to userâ€™s workspace localì—ì„œ ë§Œë“¤ì–´ì§„ env íŒŒì¼ì„ ì„œë²„ë¡œ ì˜®ê¸¸ ë•ŒëŠ” scpë¥¼ ì‚¬ìš©í•œë‹¤. ê°„ë‹¨í•œ ì‚¬ìš©ë²•ì€ ì•„ë˜ì™€ ê°™ë‹¤.\n1 2 3 4 5 6 7  # scp ì‚¬ìš©ë²• # File upload scp [FILEPATH] ghk@[IP address]:~/ # upload from local, ~/ means home directory # File download scp ghk@[IP address]:[FILEPATH] ./ # scp [server file path] [local save path] # directory ì „ì²´ ë‹¤ìš´, ì—…ë¡œë“œ í•  ë•ŒëŠ” -r ì˜µì…˜ì„ ì‚¬ìš©í•œë‹¤.   Windows ì‚¬ìš©ìë¼ë©´ WinSCP ë¼ëŠ” ì´ë¦„ì˜ í”„ë¡œê·¸ë¨ì„ ì‚¬ìš©í•˜ë©´ localê³¼ ì„œë²„ ê°„ íŒŒì¼ ì „ì†¡ì„ ë³´ë‹¤ ì‰½ê²Œ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤.\n ğŸ’¡ env fileì„ ì´ìš©í•œ conda í™˜ê²½ ì„¤ì •ì€ localê³¼ ì„œë²„ ì‘ì—… í™˜ê²½ì„ ë™ì¼í•˜ê²Œ ì„¤ì •í•  ìˆ˜ ìˆëŠ” ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì´ë‹¤. ê·¸ëŸ¬ë‚˜ conda í™˜ê²½ ì„¤ì • ê³¼ì •ì´ ë„ˆë¬´ ë²ˆê±°ë¡­ë‹¤ë©´ requirements.txtë¥¼ ë§Œë“¤ì–´ íŒ¨í‚¤ì§€ ë²„ì „ë§Œ ê´€ë¦¬í•´ë„ ì¶©ëŒì„ ë°©ì§€í•  ìˆ˜ ìˆë‹¤.  1 2 3 4 5 6 7  conda install --force-reinstall -y -q -c conda-forge --file requirements.txt # --force-reinstall : Install the package even if it already exists. # -y : Yes, do not ask for confirmation. # -q : Quiet, do not display progress bar. # -c : Channels, additional channels to search for packages # conda-forge is recommended   Step 3. make SLRUM batch script and run code in server ì•ì„  ë‹¨ê³„ì—ì„œ condaí™˜ê²½ì´ ì˜ ë§Œë“¤ì–´ì¡Œë‹¤ë©´ í•´ë‹¹ ê°€ìƒí™˜ê²½ì„ activateí•˜ì—¬ ì½”ë“œë¥¼ ëŒë¦¬ëŠ” SLURM batch scriptë¥¼ ì‘ì„±í•  ìˆ˜ ìˆë‹¤. ì‚¬ìš©ìë“¤ì˜ ì´í•´ë¥¼ ë•ê¸° ìœ„í•´ TensorFlow ê³µì‹ í˜ì´ì§€ì— ê²Œì‹œëœ ì´ˆë³´ììš© íŠœí† ë¦¬ì–¼ ì½”ë“œë¥¼ SLURMì„ í†µí•´ ì‹¤í–‰ì‹œí‚¤ëŠ” ì˜ˆì œë¥¼ ê³µìœ í•œë‹¤. ë¨¼ì €, íŠœí† ë¦¬ì–¼ ì½”ë“œëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23  # tensor.py import tensorflow as tf mnist = tf.keras.datasets.mnist (x_train, y_train), (x_test, y_test) = mnist.load_data() x_train, x_test = x_train / 255.0, x_test / 255.0 model = tf.keras.models.Sequential([ tf.keras.layers.Flatten(input_shape=(28, 28)), tf.keras.layers.Dense(128, activation='relu'), tf.keras.layers.Dropout(0.2), tf.keras.layers.Dense(10, activation='softmax') ]) model.compile(optimizer='adam', loss='sparse_categorical_crossentropy', metrics=['accuracy']) model.fit(x_train, y_train, epochs=5) model.evaluate(x_test, y_test, verbose=2)   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24  #!/bin/bash # #SBATCH --job-name=gpu-tensor-test #SBATCH --mem=4gb #SBATCH --nodelist=gpu-compute #SBATCH --ntasks=1 #SBATCH --cpus-per-task=1 #SBATCH --gres=gpu:1 #SBATCH --time=00:20:00 #SBATCH --account=ghk #SBATCH --partition=all #SBATCH --output=/mnt/nas/users/ghk/code/gputest.log CONDA_BIN_PATH=/opt/miniconda/bin ENV_NAME=tensor ENV_PATH=/mnt/nas/users/$(whoami)/.conda/envs/$ENV_NAME ## $CONDA_BIN_PATH/conda env remove --prefix $ENV_PATH ## $CONDA_BIN_PATH/conda create -y --prefix $ENV_PATH python=3.8 tensorflow pandas numpy source $CONDA_BIN_PATH/activate $ENV_PATH ## pip uninstall keras ## pip install keras==2.6.0 python /mnt/nas/users/ghk/code/tensor.py    â€”job-name: ìˆ˜í–‰í•  ì‘ì—…ì˜ ì´ë¦„ â€”mem: memory limit â€”nodelist: ì‘ì—…í•  ë…¸ë“œì˜ ì´ë¦„ â€”ntasks: ì‘ì—…ì˜ ìˆ˜ â€”cpus-per-task: ê° ì‘ì—…ì—ì„œ ì‚¬ìš©í•  cpu ì½”ì–´ì˜ ìˆ˜ â€”gres=gpu : ì‘ì—…ì—ì„œ ì‚¬ìš©í•  gpuì˜ ê°œìˆ˜, gpu-compute ë…¸ë“œì—ëŠ” ì´ 2ê°œì˜ gpuê°€ ì‚¬ìš© ê°€ëŠ¥í•˜ë‹¤. â€”time: ì‘ì—… ì œí•œì‹œê°„ â€”account: í•´ë‹¹ ì‘ì—…ì„ ìˆ˜í–‰í•˜ëŠ” ê³„ì •ì˜ ì´ë¦„ â€”partition: group of nodes with specific characteristics â€”output: ì½”ë“œ ì‹¤í–‰ ê²°ê³¼ log  ì œì‹œí•œ ëŒ€ë¡œ python íŒŒì¼ê³¼ batch script íŒŒì¼ì´ ì˜ ë§Œë“¤ì–´ì¡Œë‹¤ë©´ sbatch ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•˜ì—¬ ê³„ì‚°ì„ ì‹¤í–‰í•  ìˆ˜ ìˆë‹¤.\n1 2  sbatch tensor.sh smap -i 1 # ì‘ì—… í˜„í™©ì„ 1ì´ˆë§ˆë‹¤ ê°±ì‹ í•˜ì—¬ ë³´ì—¬ì¤€ë‹¤. ctrl+cë¡œ escape í•  ìˆ˜ ìˆë‹¤.   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17  ghk@proxy:~/code$ cat gputest.log 2022-03-15 14:27:34.877232: I tensorflow/core/platform/cpu_feature_guard.cc:142] This TensorFlow binary is optimized with oneAPI Deep Neural Network Library (oneDNN) to use the following CPU instructions in performance-critical operations: SSE4.1 SSE4.2 AVX AVX2 AVX512F FMA To enable them in other operations, rebuild TensorFlow with the appropriate compiler flags. 2022-03-15 14:27:34.887611: I tensorflow/core/common_runtime/process_util.cc:146] Creating new thread pool with default inter op setting: 2. Tune using inter_op_parallelism_threads for best performance. 2022-03-15 14:27:38.063857: I tensorflow/compiler/mlir/mlir_graph_optimization_pass.cc:185] None of the MLIR Optimization Passes are enabled (registered 2) Epoch 1/5 1875/1875 [==============================] - 36s 19ms/step - loss: 0.2993 - accuracy: 0.9140 Epoch 2/5 1875/1875 [==============================] - 18s 10ms/step - loss: 0.1436 - accuracy: 0.9575 Epoch 3/5 1875/1875 [==============================] - 17s 9ms/step - loss: 0.1080 - accuracy: 0.9675 Epoch 4/5 1875/1875 [==============================] - 19s 10ms/step - loss: 0.0866 - accuracy: 0.9739 Epoch 5/5 1875/1875 [==============================] - 52s 28ms/step - loss: 0.0750 - accuracy: 0.9762 313/313 - 4s - loss: 0.0782 - accuracy: 0.9779 [0.078231580555439, 0.9779000282287598]   SLURM batch scriptë¥¼ ì‚¬ìš©ìë“¤ì´ ë³´ë‹¤ í¸í•˜ê²Œ ë§Œë“¤ ìˆ˜ ìˆë„ë¡ SLURM Job Configurator ë¥¼ ìƒˆë¡­ê²Œ ì‘ì„±í•˜ì˜€ë‹¤. ì‚¬ìš©ìë“¤ì€ gpu ì˜µì…˜ì„ ì²´í¬í•˜ê±°ë‚˜ í•´ì œí•˜ì—¬ gpu-compute node ì‚¬ìš© ì—¬ë¶€ë¥¼ ê²°ì •í•  ìˆ˜ ìˆë‹¤. í•´ë‹¹ë˜ëŠ” ì˜µì…˜ì„ ì²´í¬í•˜ê³  Print ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ì†ì‰½ê²Œ batch scriptë¥¼ ì‘ì„±í•  ìˆ˜ ìˆë‹¤.\në” ì•Œì•„ë³´ê¸° Submitting a slurm job script\nSLRUM Job Examples\nTensorFlow on the HPC Clusters\nRefernece ",
  "wordCount" : "2093",
  "inLanguage": "en",
  "datePublished": "2022-03-15T14:54:35+09:00",
  "dateModified": "2022-03-15T14:54:35+09:00",
  "author":{
    "@type": "Person",
    "name": "Jongmin Mun"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://hpc.stat.yonsei.ac.kr/docs/how-to-use-cpu-node/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Chili Pepper",
    "logo": {
      "@type": "ImageObject",
      "url": "https://hpc.stat.yonsei.ac.kr/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://hpc.stat.yonsei.ac.kr" accesskey="h" title="Chili Pepper (Alt + H)">Chili Pepper</a>
            <span class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </span>
        </div>
        <ul id="menu">
            <li>
                <a href="https://hpc.stat.yonsei.ac.kr/docs/" title="Docs">
                    <span>Docs</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://hpc.stat.yonsei.ac.kr">Home</a>&nbsp;Â»&nbsp;<a href="https://hpc.stat.yonsei.ac.kr/docs/">Docs</a></div>
    <h1 class="post-title">
      How to Use GPU Node for SLURM
    </h1>
    <div class="post-meta"><span title='2022-03-15 14:54:35 +0900 +0900'>March 15, 2022</span>&nbsp;Â·&nbsp;10 min&nbsp;Â·&nbsp;Jongmin Mun

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#how-to-use-cpu-node-for-slurm" aria-label="How to use CPU node for SLURM">How to use CPU node for SLURM</a><ul>
                        
                <li>
                    <a href="#step-1---terminal-%ec%95%b1-%ea%b3%a0%eb%a5%b4%ea%b8%b0" aria-label="Step 1 - terminal ì•± ê³ ë¥´ê¸°">Step 1 - terminal ì•± ê³ ë¥´ê¸°</a></li>
                <li>
                    <a href="#step-2---proxy-node-ssh-%ec%a0%91%ec%86%8d" aria-label="Step 2 - proxy node SSH ì ‘ì†">Step 2 - proxy node SSH ì ‘ì†</a><ul>
                        
                <li>
                    <a href="#1-visual-studio-code-extensions%ec%97%90%ec%84%9c-remote-development-%ec%84%a4%ec%b9%98fn3" aria-label="1. Visual Studio Code extensionsì—ì„œ Remote Development ì„¤ì¹˜fn^3">1. Visual Studio Code extensionsì—ì„œ Remote Development ì„¤ì¹˜<a href="https://jstar0525.tistory.com/14">fn^3</a></a></li>
                <li>
                    <a href="#2-remote-explorer%ec%97%90%ec%84%9c-ssh-targets%eb%a5%bc-%ec%84%a0%ed%83%9d-%ed%9b%84-add-new-%ed%81%b4%eb%a6%ad" aria-label="2. Remote Explorerì—ì„œ SSH Targetsë¥¼ ì„ íƒ í›„, Add New í´ë¦­">2. Remote Explorerì—ì„œ SSH Targetsë¥¼ ì„ íƒ í›„, Add New í´ë¦­</a></li>
                <li>
                    <a href="#3-ssh-%ec%a0%91%ec%86%8d-%ec%bb%a4%eb%a7%a8%eb%93%9c-%ec%9e%85%eb%a0%a5" aria-label="3. ssh ì ‘ì† ì»¤ë§¨ë“œ ì…ë ¥">3. ssh ì ‘ì† ì»¤ë§¨ë“œ ì…ë ¥</a></li>
                <li>
                    <a href="#4-ssh-configuration-file%ec%9d%84-%ec%a0%80%ec%9e%a5%ed%95%a0-%ec%9e%a5%ec%86%8c-%ec%84%a0%ed%83%9d" aria-label="4. SSH configuration fileì„ ì €ì¥í•  ì¥ì†Œ ì„ íƒ">4. SSH configuration fileì„ ì €ì¥í•  ì¥ì†Œ ì„ íƒ</a></li>
                <li>
                    <a href="#5-remote-explore%ec%97%90%ec%84%9c-connect-to-host-in-new-window-%ec%84%a0%ed%83%9d" aria-label="5. Remote Exploreì—ì„œ Connect to Host in New Window ì„ íƒ">5. Remote Exploreì—ì„œ Connect to Host in New Window ì„ íƒ</a></li>
                <li>
                    <a href="#6-%ec%84%9c%eb%b2%84-platform-%ec%84%a0%ed%83%9d" aria-label="6. ì„œë²„ Platform ì„ íƒ">6. ì„œë²„ Platform ì„ íƒ</a></li>
                <li>
                    <a href="#7-password-%ec%9e%85%eb%a0%a5" aria-label="7. Password ì…ë ¥">7. Password ì…ë ¥</a></li>
                <li>
                    <a href="#8-%ed%8c%8c%ec%9d%bc-%ec%8b%9c%ec%8a%a4%ed%85%9c-%eb%a7%88%ec%9a%b4%ed%8a%b8" aria-label="8. íŒŒì¼ ì‹œìŠ¤í…œ ë§ˆìš´íŠ¸">8. íŒŒì¼ ì‹œìŠ¤í…œ ë§ˆìš´íŠ¸</a></li>
                <li>
                    <a href="#9-%eb%91%98%eb%9f%ac%eb%b3%b4%ea%b8%b0" aria-label="9. ë‘˜ëŸ¬ë³´ê¸°">9. ë‘˜ëŸ¬ë³´ê¸°</a></li></ul>
                </li>
                <li>
                    <a href="#step-3---%ed%8c%8c%ec%9d%bc-%ec%8b%9c%ec%8a%a4%ed%85%9c-%ea%b5%ac%ec%a1%b0-%ec%9d%b4%ed%95%b4" aria-label="Step 3 - íŒŒì¼ ì‹œìŠ¤í…œ êµ¬ì¡° ì´í•´">Step 3 - íŒŒì¼ ì‹œìŠ¤í…œ êµ¬ì¡° ì´í•´</a></li>
                <li>
                    <a href="#step-3---data-transfer" aria-label="Step 3 - Data Transfer">Step 3 - Data Transfer</a><ul>
                        
                <li>
                    <a href="#%eb%b0%a9%eb%b2%95-1-scp" aria-label="ë°©ë²• 1. scp">ë°©ë²• 1. scp</a></li>
                <li>
                    <a href="#sending-a-local-filesome_filetxt-to-the-remote-home-directory" aria-label="Sending a local file(some_file.txt) to the remote home directory">Sending a local file(<code>some_file.txt</code>) to the remote home directory</a></li>
                <li>
                    <a href="#sending-a-local-directorysome_files-to-the-remote-home-directory" aria-label="Sending a local directory(some_files/) to the remote home directory">Sending a local directory(<code>some_files/</code>) to the remote home directory</a></li>
                <li>
                    <a href="#recieving-a-remote-filesome_filetxt-in-the-home-directory-to-the-current-local-directory" aria-label="Recieving a remote file(some_file.txt) in the home directory to the current local directory">Recieving a remote file(<code>some_file.txt</code>) in the home directory to the current local directory</a></li>
                <li>
                    <a href="#recieving-a-remote-directorymntnasusersdummyusersome_files-in-the-home-directory-to-the-current-local-directory" aria-label="Recieving a remote directory(/mnt/nas/users/dummyuser/some_files) in the home directory to the current local directory">Recieving a remote directory(<code>/mnt/nas/users/dummyuser/some_files</code>) in the home directory to the current local directory</a></li>
                <li>
                    <a href="#%eb%b0%a9%eb%b2%95-2-git" aria-label="ë°©ë²• 2. Git">ë°©ë²• 2. Git</a></li></ul>
                </li>
                <li>
                    <a href="#step-4-conda-environment-%ec%83%9d%ec%84%b1" aria-label="Step 4. Conda environment ìƒì„±">Step 4. Conda environment ìƒì„±</a><ul>
                        
                <li>
                    <a href="#1-local%ec%97%90%ec%84%9c-conda-environment-%ec%83%9d%ec%84%b1" aria-label="1. localì—ì„œ conda environment ìƒì„±">1. localì—ì„œ conda environment ìƒì„±</a></li>
                <li>
                    <a href="#2-cpu-compute-node%ec%97%90-local%ea%b3%bc-%eb%8f%99%ec%9d%bc%ed%95%9c-conda-environment-%ea%b5%ac%ec%b6%95%ed%95%98%ea%b8%b0" aria-label="2. cpu-compute nodeì— localê³¼ ë™ì¼í•œ conda environment êµ¬ì¶•í•˜ê¸°">2. <code>cpu-compute</code> nodeì— localê³¼ ë™ì¼í•œ conda environment êµ¬ì¶•í•˜ê¸°</a></li></ul>
                </li>
                <li>
                    <a href="#step-2-make-env-file-and-upload-file-to-users-workspace" aria-label="Step 2. make env file and upload file to userâ€™s workspace">Step 2. make env file and upload file to userâ€™s workspace</a></li>
                <li>
                    <a href="#step-3-make-slrum-batch-script-and-run-code-in-server" aria-label="Step 3. make SLRUM batch script and run code in server">Step 3. make SLRUM batch script and run code in server</a></li>
                <li>
                    <a href="#%eb%8d%94-%ec%95%8c%ec%95%84%eb%b3%b4%ea%b8%b0" aria-label="ë” ì•Œì•„ë³´ê¸°">ë” ì•Œì•„ë³´ê¸°</a></li></ul>
                </li>
                <li>
                    <a href="#refernece" aria-label="Refernece">Refernece</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h1 id="how-to-use-cpu-node-for-slurm">How to use CPU node for SLURM<a hidden class="anchor" aria-hidden="true" href="#how-to-use-cpu-node-for-slurm">#</a></h1>
<h2 id="step-1---terminal-ì•±-ê³ ë¥´ê¸°">Step 1 - terminal ì•± ê³ ë¥´ê¸°<a hidden class="anchor" aria-hidden="true" href="#step-1---terminal-ì•±-ê³ ë¥´ê¸°">#</a></h2>
<p>UserëŠ” <code>SSH</code>ë¡œ <code>proxy</code> nodeì— ì ‘ì†í•˜ì—¬ í´ëŸ¬ìŠ¤í„°ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. í„°ë¯¸ë„ í™˜ê²½ê³¼ <code>vi</code> ì—ë””í„°ì— ìµìˆ™í•œ userëŠ” ìì‹ ì—ê²Œ ì¹œìˆ™í•œ ì•±ì„ ì‚¬ìš©í•˜ë©´ ë©ë‹ˆë‹¤. ê·¸ë ‡ì§€ ì•Šì€ ê²½ìš°, <a href="https://code.visualstudio.com/download">Visual Studio Code</a>ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ì¶”ì²œí•˜ë©°, ì´ íŠœí† ë¦¬ì–¼ì—ì„œëŠ” <code>Visual Studio Code</code>ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ì „ì œë¡œ í•©ë‹ˆë‹¤. ì¶”ì²œ ì´ìœ ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.</p>
<ul>
<li>Windows, MacOS, Linuxì—ì„œ ëª¨ë‘ ì‚¬ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤.</li>
<li><a href="https://code.visualstudio.com/docs/editor/vscode-web">Web Version</a>ë„ ìˆê¸° ë•Œë¬¸ì— ëª¨ë°”ì¼ ë””ë°”ì´ìŠ¤ì—ì„œë„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
<li>ë˜í•œ í„°ë¯¸ë„ê³¼ ì—ë””í„°, íŒŒì¼ ë¸Œë¼ìš°ì €ê°€ í†µí•©ë˜ì–´ ìˆê¸° ë•Œë¬¸ì— ë¶ˆí¸í•˜ê²Œ <code>vi</code>ë‚˜ <code>nano</code>ë“±ì˜ CUI ê¸°ë°˜ í…ìŠ¤íŠ¸ ì—ë””í„°ë¥¼ ì‚¬ìš©í•  í•„ìš”ê°€ ì—†ìœ¼ë©°, íŒŒì¼ ì „ì†¡ë„ <code>scp</code>ë“±ì˜ ë³µì¡í•œ í”„ë¡œí† ì½œì„ ì‚¬ìš©í•  í•„ìš” ì—†ì´ drag &amp; dropìœ¼ë¡œ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
</ul>
<p>í„°ë¯¸ë„ì—ì„œ ssh ì ‘ì†ë§Œ í•  ìˆ˜ ìˆë‹¤ë©´ ì–´ë–¤ ê¸°ê¸°ì—ì„œë„ <code>proxy</code> nodeì— ì ‘ì†í•˜ì—¬ ì‘ì—…ì„ ì œì¶œí•  ìˆ˜ ìˆìœ¼ë©°, í„°ë¯¸ë„ì´ ì¢…ë£Œë˜ì–´ë„ ì‘ì—…ì€ ê³„ì† ì‹¤í–‰ë©ë‹ˆë‹¤. Standard output(Python, Rì—ì„œ consoleì— ì¶œë ¥ë˜ëŠ” ë©”ì‹œì§€)ê°€ ë¡œê·¸ íŒŒì¼ì— ê¸°ë¡ë˜ë¯€ë¡œ, ë‚˜ì¤‘ì— ë‹¤ì‹œ í„°ë¯¸ë„ì— ì ‘ì†í•˜ì—¬ job ì‹¤í–‰ í˜„í™©ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p><code>Visual Studio Code</code>ì™¸ì— ë‹¤ë¥¸ ì•±ì„ ì‚¬ìš©í•˜ì‹¤ ê²½ìš° ì¶”ì²œí•˜ëŠ” ì•±ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.</p>
<ul>
<li>Windows 10: PowerShellë³´ë‹¤ëŠ” <a href="(https://docs.microsoft.com/ko-kr/windows/terminal/install)">Windows Terminal</a>ë¥¼ ì¶”ì²œí•©ë‹ˆë‹¤.</li>
<li>MacOS: ê¸°ë³¸ í„°ë¯¸ë„ì„ ì‚¬ìš©í•´ë„ ë˜ì§€ë§Œ, <a href="https://iterm2.com">iTerm2</a>ë¥¼ ì¶”ì²œí•©ë‹ˆë‹¤.</li>
<li>iOS: <a href="https://apps.apple.com/app/id1594898306">Blink</a></li>
<li>Android: <a href="https://play.google.com/store/apps/details?id=com.termux&amp;hl=ko&amp;gl=US">Termux</a></li>
</ul>
<h2 id="step-2---proxy-node-ssh-ì ‘ì†">Step 2 - proxy node SSH ì ‘ì†<a hidden class="anchor" aria-hidden="true" href="#step-2---proxy-node-ssh-ì ‘ì†">#</a></h2>
<h3 id="1-visual-studio-code-extensionsì—ì„œ-remote-development-ì„¤ì¹˜fn3">1. Visual Studio Code extensionsì—ì„œ Remote Development ì„¤ì¹˜<a href="https://jstar0525.tistory.com/14">fn^3</a><a hidden class="anchor" aria-hidden="true" href="#1-visual-studio-code-extensionsì—ì„œ-remote-development-ì„¤ì¹˜fn3">#</a></h3>
<p>Microsoftê°€ ì œê³µí•˜ëŠ” <code>Remote Development</code> extension packì„ ì„¤ì¹˜í•©ë‹ˆë‹¤. Remote-WSL, Remote-Containers, Remote-SSHê°€ ìë™ì ìœ¼ë¡œ ê°™ì´ ì„¤ì¹˜ë©ë‹ˆë‹¤.
<img loading="lazy" src="/assets/vscode_ssh_1.png" alt="vscode_ssh_1"  />

<img loading="lazy" src="/assets/vscode_ssh_2.png" alt="vscode_ssh_2"  />
</p>
<h3 id="2-remote-explorerì—ì„œ-ssh-targetsë¥¼-ì„ íƒ-í›„-add-new-í´ë¦­">2. Remote Explorerì—ì„œ SSH Targetsë¥¼ ì„ íƒ í›„, Add New í´ë¦­<a hidden class="anchor" aria-hidden="true" href="#2-remote-explorerì—ì„œ-ssh-targetsë¥¼-ì„ íƒ-í›„-add-new-í´ë¦­">#</a></h3>
<p><img loading="lazy" src="/assets/vscode_ssh_3.png" alt="vscode_ssh_3"  />
</p>
<h3 id="3-ssh-ì ‘ì†-ì»¤ë§¨ë“œ-ì…ë ¥">3. ssh ì ‘ì† ì»¤ë§¨ë“œ ì…ë ¥<a hidden class="anchor" aria-hidden="true" href="#3-ssh-ì ‘ì†-ì»¤ë§¨ë“œ-ì…ë ¥">#</a></h3>
<p>ì•„ë˜ì™€ ê°™ì€ ì°½ì´ ëœ¨ë©´ ssh ì»¤ë§¨ë“œë¥¼ ì…ë ¥í•˜ì—¬ <code>proxy node</code>ì— ì ‘ì†í•©ë‹ˆë‹¤.
<img loading="lazy" src="/assets/vscode_ssh_4.png" alt="vscode_ssh_4"  />
</p>
<p>ì•„ë˜ ì½”ë“œì— Slackìœ¼ë¡œ ì•ˆë‚´ë°›ì€ ip, port, usernameì„ ë„£ì–´ì„œ ìœ„ ì°½ì— ì…ë ¥í•˜ê³  <code>Enter</code>í‚¤ë¥¼ ëˆ„ë¥´ë©´ ë©ë‹ˆë‹¤. <code>SSH</code>ì˜ default portëŠ” <code>22</code>ì´ì§€ë§Œ, ì €í¬ì˜ í´ëŸ¬ìŠ¤í„°ëŠ” ë³´ì•ˆìƒ ì´ìœ ë¡œ ë‹¤ë¥¸ portë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><a style="outline: none; text-decoration:none; color:inherit" href="#1">1</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ssh -p <span class="o">[</span>port<span class="o">]</span> <span class="o">[</span>username<span class="o">]</span>@<span class="o">[</span>ip<span class="o">]</span> 
</code></pre></td></tr></table>
</div>
</div><h3 id="4-ssh-configuration-fileì„-ì €ì¥í• -ì¥ì†Œ-ì„ íƒ">4. SSH configuration fileì„ ì €ì¥í•  ì¥ì†Œ ì„ íƒ<a hidden class="anchor" aria-hidden="true" href="#4-ssh-configuration-fileì„-ì €ì¥í• -ì¥ì†Œ-ì„ íƒ">#</a></h3>
<p><strong>Select SSH configuration file to update</strong>ê°€ ë‚˜ì˜¤ë©´ ë§¨ ìœ„ í•­ëª©ì„ ì„ íƒí•©ë‹ˆë‹¤.
<img loading="lazy" src="/assets/vscode_ssh_5.png" alt="vscode_ssh_5"  />
</p>
<p><strong>Host added!</strong> ë¼ëŠ” ë©”ì‹œì§€ê°€ ìš°ì¸¡ í•˜ë‹¨ì— ë‚˜ì˜µë‹ˆë‹¤.
<img loading="lazy" src="/assets/vscode_ssh_6.png" alt="vscode_ssh_6"  />
</p>
<h3 id="5-remote-exploreì—ì„œ-connect-to-host-in-new-window-ì„ íƒ">5. Remote Exploreì—ì„œ Connect to Host in New Window ì„ íƒ<a hidden class="anchor" aria-hidden="true" href="#5-remote-exploreì—ì„œ-connect-to-host-in-new-window-ì„ íƒ">#</a></h3>
<p><img loading="lazy" src="/assets/vscode_ssh_7.png" alt="vscode_ssh_7"  />
</p>
<h3 id="6-ì„œë²„-platform-ì„ íƒ">6. ì„œë²„ Platform ì„ íƒ<a hidden class="anchor" aria-hidden="true" href="#6-ì„œë²„-platform-ì„ íƒ">#</a></h3>
<p>Linuxë¥¼ ì„ íƒí•©ë‹ˆë‹¤.
<img loading="lazy" src="/assets/vscode_ssh_8.png" alt="vscode_ssh_8"  />
</p>
<h3 id="7-password-ì…ë ¥">7. Password ì…ë ¥<a hidden class="anchor" aria-hidden="true" href="#7-password-ì…ë ¥">#</a></h3>
<p>ì•ˆë‚´ë°›ì€ passwordë¥¼ ì…ë ¥í•˜ì—¬ ë¡œê·¸ì¸í•©ë‹ˆë‹¤.
<img loading="lazy" src="/assets/vscode_ssh_9.png" alt="vscode_ssh_9"  />
</p>
<h3 id="8-íŒŒì¼-ì‹œìŠ¤í…œ-ë§ˆìš´íŠ¸">8. íŒŒì¼ ì‹œìŠ¤í…œ ë§ˆìš´íŠ¸<a hidden class="anchor" aria-hidden="true" href="#8-íŒŒì¼-ì‹œìŠ¤í…œ-ë§ˆìš´íŠ¸">#</a></h3>
<p>ì¢Œì¸¡ íƒ­ì˜ íŒŒì¼ ëª¨ì–‘ ì•„ì´ì½˜ì„ í´ë¦­í•˜ê³  <strong>Open Folder</strong> ë²„íŠ¼ì„ í´ë¦­í•©ë‹ˆë‹¤.
<img loading="lazy" src="/assets/vscode_ssh_10.png" alt="vscode_ssh_10"  />
</p>
<p>ê¸°ë³¸ì ìœ¼ë¡œ user home directory ê²½ë¡œê°€ ì…ë ¥ë˜ì–´ ìˆìŠµë‹ˆë‹¤. OKë¥¼ ëˆ„ë¦…ë‹ˆë‹¤.
<img loading="lazy" src="/assets/vscode_ssh_11.png" alt="vscode_ssh_11"  />
</p>
<h3 id="9-ë‘˜ëŸ¬ë³´ê¸°">9. ë‘˜ëŸ¬ë³´ê¸°<a hidden class="anchor" aria-hidden="true" href="#9-ë‘˜ëŸ¬ë³´ê¸°">#</a></h3>
<p><img loading="lazy" src="/assets/vscode_ssh_12.png" alt="vscode_ssh_12"  />
</p>
<ul>
<li>
<p>ì¢Œì¸¡ file explorerì—ì„œ íŒŒì¼ì„ ê´€ë¦¬í•©ë‹ˆë‹¤. Windows íƒìƒ‰ê¸°ë‚˜ MacOS Finderì—ì„œ drag&amp;dropìœ¼ë¡œ íŒŒì¼ì„ ì˜®ê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤. í´ëŸ¬ìŠ¤í„° ë‚´ë¶€ì˜ íŒŒì¼ì„ userì˜ local ì»´í“¨í„°ë¡œ ê°€ì ¸ì˜¤ëŠ” ê²ƒë„ drag&amp;dropìœ¼ë¡œ ê°€ëŠ¥í•©ë‹ˆë‹¤.</p>
</li>
<li>
<p><code>ctrl + shift + ~</code>í‚¤ë¥¼ ëˆ„ë¥´ë©´ í„°ë¯¸ë„ì´ ì—´ë¦½ë‹ˆë‹¤. ì—¬ê¸°ì„œ ì„œë²„ ì‚¬ìš©ì— í•„ìš”í•œ ì»¤ë§¨ë“œë¥¼ ì…ë ¥í•©ë‹ˆë‹¤.</p>
</li>
<li>
<p>text editorì—ì„œ ì½”ë“œì™€ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ìˆ˜ì •í•˜ê³  ì´ë¯¸ì§€ íŒŒì¼ ë“±ì„ ì—´ëŒí•©ë‹ˆë‹¤.</p>
</li>
</ul>
<h2 id="step-3---íŒŒì¼-ì‹œìŠ¤í…œ-êµ¬ì¡°-ì´í•´">Step 3 - íŒŒì¼ ì‹œìŠ¤í…œ êµ¬ì¡° ì´í•´<a hidden class="anchor" aria-hidden="true" href="#step-3---íŒŒì¼-ì‹œìŠ¤í…œ-êµ¬ì¡°-ì´í•´">#</a></h2>
<p>NAS(Network Attached Storage)ì— ê° userì˜ home directoryê°€ ìˆìŠµë‹ˆë‹¤. NASëŠ” ëª¨ë“  nodeì— ë§ˆìš´íŠ¸ë˜ì–´ ìˆìœ¼ë©°, ëª¨ë“  nodeì—ì„œ userëª…ê³¼ groupëª… ë° ê´€ë ¨ ì„¤ì •ì´ ë™ì¼í•©ë‹ˆë‹¤. Userëª…ì€ ì»´í“¨íŒ… í´ëŸ¬ìŠ¤í„° ì‚¬ìš© ì‹ ì²­ì‹œ ì œì¶œí•˜ì‹  ì´ë©”ì¼ ì£¼ì†Œì˜ @ ì• ë¶€ë¶„ê³¼ ë™ì¼í•©ë‹ˆë‹¤.</p>
<p>User home directoryì˜ prefixëŠ” <code>/mnt/nas/users/</code>ì…ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, <code>dummyuser</code>ë¼ëŠ” userì˜ home directoryì˜ ê²½ë¡œëŠ” <code>/mnt/nas/users/dummyuser/</code>ì…ë‹ˆë‹¤. ë‹¤ë¥¸ userì˜ home directoryë¥¼ ì—´ëŒí•  ìˆ˜ ì—†ë„ë¡ ê¶Œí•œì„¤ì •ì´ ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ê° userëŠ” ë°ì´í„°ì™€ ì½”ë“œ, ì„¤ì • íŒŒì¼ ë“±ì„ ìì‹ ì˜ home directory ë‚´ì— ì €ì¥í•©ë‹ˆë‹¤.</p>
<ul>
<li>Linuxì—ì„œ directoryë¥¼ ì´ë™í•˜ëŠ” ëª…ë ¹ì–´ëŠ” <code>cd</code>ì…ë‹ˆë‹¤.</li>
<li>home directoryë¥¼ ë‚˜íƒ€ë‚´ëŠ” ê¸°í˜¸ëŠ” <code>~</code>ì…ë‹ˆë‹¤.</li>
<li>í˜„ì¬ directoryë¥¼ í™•ì¸í•˜ëŠ” ëª…ë ¹ì–´ëŠ” <code>pwd</code>ì…ë‹ˆë‹¤</li>
<li>íŒŒì¼ ëª©ë¡ì„ í™•ì¸í•˜ëŠ” ëª…ë ¹ì–´ëŠ” <code>ls</code>ì…ë‹ˆë‹¤.</li>
</ul>
<p>ë”°ë¼ì„œ userëŠ” proxy nodeì•„ë˜ì˜ ëª…ë ¹ì–´ë¥¼ í†µí•´ ìì‹ ì˜ í™ˆ directoryë¡œ ì´ë™í•´ ê·¸ ì•ˆì— ìˆëŠ” íŒŒì¼ ëª©ë¡ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><a style="outline: none; text-decoration:none; color:inherit" href="#1">1</a>
</span><span class="lnt" id="2"><a style="outline: none; text-decoration:none; color:inherit" href="#2">2</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">cd ~
ls
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><a style="outline: none; text-decoration:none; color:inherit" href="#1"> 1</a>
</span><span class="lnt" id="2"><a style="outline: none; text-decoration:none; color:inherit" href="#2"> 2</a>
</span><span class="lnt" id="3"><a style="outline: none; text-decoration:none; color:inherit" href="#3"> 3</a>
</span><span class="lnt" id="4"><a style="outline: none; text-decoration:none; color:inherit" href="#4"> 4</a>
</span><span class="lnt" id="5"><a style="outline: none; text-decoration:none; color:inherit" href="#5"> 5</a>
</span><span class="lnt" id="6"><a style="outline: none; text-decoration:none; color:inherit" href="#6"> 6</a>
</span><span class="lnt" id="7"><a style="outline: none; text-decoration:none; color:inherit" href="#7"> 7</a>
</span><span class="lnt" id="8"><a style="outline: none; text-decoration:none; color:inherit" href="#8"> 8</a>
</span><span class="lnt" id="9"><a style="outline: none; text-decoration:none; color:inherit" href="#9"> 9</a>
</span><span class="lnt" id="10"><a style="outline: none; text-decoration:none; color:inherit" href="#10">10</a>
</span><span class="lnt" id="11"><a style="outline: none; text-decoration:none; color:inherit" href="#11">11</a>
</span><span class="lnt" id="12"><a style="outline: none; text-decoration:none; color:inherit" href="#12">12</a>
</span><span class="lnt" id="13"><a style="outline: none; text-decoration:none; color:inherit" href="#13">13</a>
</span><span class="lnt" id="14"><a style="outline: none; text-decoration:none; color:inherit" href="#14">14</a>
</span><span class="lnt" id="15"><a style="outline: none; text-decoration:none; color:inherit" href="#15">15</a>
</span><span class="lnt" id="16"><a style="outline: none; text-decoration:none; color:inherit" href="#16">16</a>
</span><span class="lnt" id="17"><a style="outline: none; text-decoration:none; color:inherit" href="#17">17</a>
</span><span class="lnt" id="18"><a style="outline: none; text-decoration:none; color:inherit" href="#18">18</a>
</span><span class="lnt" id="19"><a style="outline: none; text-decoration:none; color:inherit" href="#19">19</a>
</span><span class="lnt" id="20"><a style="outline: none; text-decoration:none; color:inherit" href="#20">20</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"># with the tree command the home directory will typically look like this
/mnt/nas/users/dummyuser/
â”œâ”€â”€ .bash_history
â”œâ”€â”€ .bash_logout
â”œâ”€â”€ .bashrc
â”œâ”€â”€ .conda
â”œâ”€â”€ .config
â”œâ”€â”€ GettingStarted.md
â”œâ”€â”€ .gnupg
â”œâ”€â”€ .ipynb_checkpoints
â”œâ”€â”€ .ipython
â”œâ”€â”€ .jupyter
â”œâ”€â”€ .local
â”œâ”€â”€ logs
â”œâ”€â”€ .npm
â”œâ”€â”€ .profile
â”œâ”€â”€ .python_history
â”œâ”€â”€ some_script.sh
â”œâ”€â”€ .ssh
â””â”€â”€ .viminfo
</code></pre></td></tr></table>
</div>
</div><h2 id="step-3---data-transfer">Step 3 - Data Transfer<a hidden class="anchor" aria-hidden="true" href="#step-3---data-transfer">#</a></h2>
<p>íŒŒì¼ì„ ì˜®ê¸¸ ë•Œì—ëŠ” í¬ê²Œ &lsquo;SCP&rsquo;ì™€ &lsquo;Git&rsquo; ë‘ ê°€ì§€ ë°©ë²•ì´ ìˆìŠµë‹ˆë‹¤.</p>
<h3 id="ë°©ë²•-1-scp">ë°©ë²• 1. scp<a hidden class="anchor" aria-hidden="true" href="#ë°©ë²•-1-scp">#</a></h3>
<p><code>scp</code>ëŠ” <code>SSH</code>ì™€ ê°™ì€ portë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. ì•„ë˜ ì»¤ë§¨ë“œë¥¼ ì´ìš©í•´ íŒŒì¼ì„ ë³´ë‚´ê³  ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. <code>dummyuser</code>ë¥¼ ë³¸ì¸ì˜ userëª…ìœ¼ë¡œ ë°”ê¾¸ê³  íŒŒì¼ëª…, directoryëª…ì„ ì ì ˆíˆ ë°”ê¾¸ë©´ ë©ë‹ˆë‹¤.</p>
<h3 id="sending-a-local-filesome_filetxt-to-the-remote-home-directory">Sending a local file(<code>some_file.txt</code>) to the remote home directory<a hidden class="anchor" aria-hidden="true" href="#sending-a-local-filesome_filetxt-to-the-remote-home-directory">#</a></h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><a style="outline: none; text-decoration:none; color:inherit" href="#1">1</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">scp -P <span class="o">[</span>port<span class="o">]</span> some_file.txt dummyuser@hpc.stat.yonsei.ac.kr:~/
</code></pre></td></tr></table>
</div>
</div><h3 id="sending-a-local-directorysome_files-to-the-remote-home-directory">Sending a local directory(<code>some_files/</code>) to the remote home directory<a hidden class="anchor" aria-hidden="true" href="#sending-a-local-directorysome_files-to-the-remote-home-directory">#</a></h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><a style="outline: none; text-decoration:none; color:inherit" href="#1">1</a>
</span><span class="lnt" id="2"><a style="outline: none; text-decoration:none; color:inherit" href="#2">2</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">scp -P <span class="o">[</span>port<span class="o">]</span> -r some_files dummyuser@hpc.stat.yonsei.ac.kr:~/
<span class="c1"># /mnt/nas/users/dummyuser/some_files/ will be created</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="recieving-a-remote-filesome_filetxt-in-the-home-directory-to-the-current-local-directory">Recieving a remote file(<code>some_file.txt</code>) in the home directory to the current local directory<a hidden class="anchor" aria-hidden="true" href="#recieving-a-remote-filesome_filetxt-in-the-home-directory-to-the-current-local-directory">#</a></h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><a style="outline: none; text-decoration:none; color:inherit" href="#1">1</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">scp -P <span class="o">[</span>port<span class="o">]</span> dummyuser@hpc.stat.yonsei.ac.kr:~/some_file.txt
</code></pre></td></tr></table>
</div>
</div><h3 id="recieving-a-remote-directorymntnasusersdummyusersome_files-in-the-home-directory-to-the-current-local-directory">Recieving a remote directory(<code>/mnt/nas/users/dummyuser/some_files</code>) in the home directory to the current local directory<a hidden class="anchor" aria-hidden="true" href="#recieving-a-remote-directorymntnasusersdummyusersome_files-in-the-home-directory-to-the-current-local-directory">#</a></h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><a style="outline: none; text-decoration:none; color:inherit" href="#1">1</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">scp -P <span class="o">[</span>port<span class="o">]</span> -r dummyuser@hpc.stat.yonsei.ac.kr:~/some_files ./
</code></pre></td></tr></table>
</div>
</div><p>ì´ ì™¸ì˜ scp ì˜µì…˜ë“¤ì€ <a href="https://www.pcwdld.com/what-is-scp#wbounce-modal">ì—¬ê¸°ì„œ</a> í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p>ìœˆë„ìš°ì—ì„œëŠ” <a href="https://winscp.net/eng/download.php">winscp</a> ë¥¼ ì´ìš©í•´ <code>scp</code>ë¥¼ drag &amp; dropìœ¼ë¡œ í¸ë¦¬í•˜ê²Œ ì´ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p>MacOSì—ì„œëŠ” <a href="https://filezilla-project.org">filezilla</a>ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ì— ëŒ€í•œ ì•ˆë‚´ëŠ” ë³„ë„ì˜ ê¸€ë¡œ ì‘ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤.</p>
<h3 id="ë°©ë²•-2-git">ë°©ë²• 2. Git<a hidden class="anchor" aria-hidden="true" href="#ë°©ë²•-2-git">#</a></h3>
<p><code>Git</code>ì´ ì´ë¯¸ ì„¤ì¹˜ë˜ì–´ ìˆìœ¼ë¯€ë¡œ, í´ëŸ¬ìŠ¤í„° ë‚´ ì ì ˆí•œ directoryì—ì„œ <code>git clone</code>ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.</p>
<h2 id="step-4-conda-environment-ìƒì„±">Step 4. Conda environment ìƒì„±<a hidden class="anchor" aria-hidden="true" href="#step-4-conda-environment-ìƒì„±">#</a></h2>
<ul>
<li><code>cpu-compute</code> nodeì—ëŠ” conda version 4.11.0ì´ ì„¤ì¹˜ë˜ì–´ ìˆìœ¼ë©° Python versionì„ 3.10ê¹Œì§€ ì§€ì›í•©ë‹ˆë‹¤<a href="https://docs.conda.io/projects/conda/en/latest/release-notes.html">fn^1</a>.</li>
<li><code>gpu-compute</code> nodeì—ëŠ” conda version 4.6.14ê°€ ì„¤ì¹˜ë˜ì–´ ìˆìœ¼ë©° Python versionì„ 3.8ê¹Œì§€ ì§€ì›í•©ë‹ˆë‹¤.</li>
</ul>
<p>ì—¬ê¸°ì„œëŠ” <code>cpu-compute</code> nodeì—ì„œ conda environmentë¥¼ ìƒì„±í•˜ëŠ” ë°©ë²•ì„ ì„¤ëª…í•©ë‹ˆë‹¤. localì—ì„œ ì‘ì„±í•œ ì½”ë“œê°€ <code>cpu-compute</code> nodeì—ì„œ ì˜¤ë¥˜ ì—†ì´ ì‘ë™í•˜ë„ë¡ í•˜ê¸° ìœ„í•´, localê³¼ <code>cpu-compute</code> nodeì—ì„œ ë™ì¼í•œ conda environmentë¥¼ êµ¬ì¶•í•´ì•¼ í•©ë‹ˆë‹¤.</p>
<h3 id="1-localì—ì„œ-conda-environment-ìƒì„±">1. localì—ì„œ conda environment ìƒì„±<a hidden class="anchor" aria-hidden="true" href="#1-localì—ì„œ-conda-environment-ìƒì„±">#</a></h3>
<p>ì´ ì„¹ì…˜ì˜ ì‘ì—…ì€ ëª¨ë‘ userì˜ local ì»´í“¨í„°ì—ì„œ ì§„í–‰í•©ë‹ˆë‹¤.</p>
<p><a href="https://docs.conda.io/en/latest/miniconda.html">miniconda</a>ë¥¼ ì„¤ì¹˜í•œ ë‹¤ìŒ, local ì»´í“¨í„°ì˜ í„°ë¯¸ë„ì—ì„œ ì•„ë˜ ì»¤ë§¨ë“œë¡œ virtual environmentë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. <code>testEnv</code> ìë¦¬ì— ì›í•˜ëŠ” ì´ë¦„ì„ ë„£ê³ , <code>python=</code> ë’¤ì— ì‚¬ìš©í•  Python versionì„ ëª…ì‹œí•©ë‹ˆë‹¤.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><a style="outline: none; text-decoration:none; color:inherit" href="#1">1</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">conda create -n testEnv <span class="nv">python</span><span class="o">=</span>3.6
</code></pre></td></tr></table>
</div>
</div><p>ì„±ê³µì ìœ¼ë¡œ ìƒì„±ë˜ë©´ ì•„ë˜ì™€ ê°™ì€ ê²°ê³¼ê°€ ë‚˜ì˜µë‹ˆë‹¤.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><a style="outline: none; text-decoration:none; color:inherit" href="#1"> 1</a>
</span><span class="lnt" id="2"><a style="outline: none; text-decoration:none; color:inherit" href="#2"> 2</a>
</span><span class="lnt" id="3"><a style="outline: none; text-decoration:none; color:inherit" href="#3"> 3</a>
</span><span class="lnt" id="4"><a style="outline: none; text-decoration:none; color:inherit" href="#4"> 4</a>
</span><span class="lnt" id="5"><a style="outline: none; text-decoration:none; color:inherit" href="#5"> 5</a>
</span><span class="lnt" id="6"><a style="outline: none; text-decoration:none; color:inherit" href="#6"> 6</a>
</span><span class="lnt" id="7"><a style="outline: none; text-decoration:none; color:inherit" href="#7"> 7</a>
</span><span class="lnt" id="8"><a style="outline: none; text-decoration:none; color:inherit" href="#8"> 8</a>
</span><span class="lnt" id="9"><a style="outline: none; text-decoration:none; color:inherit" href="#9"> 9</a>
</span><span class="lnt" id="10"><a style="outline: none; text-decoration:none; color:inherit" href="#10">10</a>
</span><span class="lnt" id="11"><a style="outline: none; text-decoration:none; color:inherit" href="#11">11</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text">Preparing transaction: done
Verifying transaction: done
Executing transaction: done
#
# To activate this environment, use
#
#     $ conda activate testEnv
#
# To deactivate an active environment, use
#
#     $ conda deactivate
</code></pre></td></tr></table>
</div>
</div><p>ì•„ë˜ ì»¤ë§¨ë“œë¥¼ í†µí•´ virtual environmentê°€ ì œëŒ€ë¡œ ìƒì„±ë˜ì—ˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><a style="outline: none; text-decoration:none; color:inherit" href="#1">1</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">conda info --env
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><a style="outline: none; text-decoration:none; color:inherit" href="#1">1</a>
</span><span class="lnt" id="2"><a style="outline: none; text-decoration:none; color:inherit" href="#2">2</a>
</span><span class="lnt" id="3"><a style="outline: none; text-decoration:none; color:inherit" href="#3">3</a>
</span><span class="lnt" id="4"><a style="outline: none; text-decoration:none; color:inherit" href="#4">4</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"># conda environments:
#
base                  *  /opt/miniconda3
testEnv                  /opt/miniconda3/envs/testEnv
</code></pre></td></tr></table>
</div>
</div><p>Virtual environmentì— ì§„ì…í•œ ë’¤ íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•©ë‹ˆë‹¤. pipë¡œ ì„¤ì¹˜ë˜ëŠ” íŒ¨í‚¤ì§€ë“¤ì€ condaë¡œ ì„¤ì¹˜ëœ íŒ¨í‚¤ì§€ì— ëŒ€í•œ ì •ë³´ë¥¼ ëª¨ë¥´ê¸° ë•Œë¬¸ì— ì˜ì¡´ì„± ì¶©ëŒì´ ë°œìƒí•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ condaë§Œì„ ì‚¬ìš©í•´ì„œ ì„¤ì¹˜í•˜ì‹¤ ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤. <a href="https://anaconda.org/anaconda/scikit-learn">anaconda ì›¹ì‚¬ì´íŠ¸</a>ì—ì„œ íŒ¨í‚¤ì§€ëª…ì„ ê²€ìƒ‰í•´ì„œ linux-64ë¥¼ ì§€ì›í•˜ëŠ” ë²„ì „ì´ ì–´ë””ê¹Œì§€ì¸ì§€ë¥¼ í™•ì¸í•˜ê³  ì„¤ì¹˜í•˜ëŠ” ê²ƒì„ ì¶”ì²œí•©ë‹ˆë‹¤. ìœ„ ì‚¬ì´íŠ¸ëŠ” ì„¤ì¹˜ ì»¤ë§¨ë“œë„ ì œê³µí•©ë‹ˆë‹¤. ì—¬ëŸ¬ íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•  ê²½ìš° í•œ ì»¤ë§¨ë“œ ë‚´ì— ëª…ì‹œí•˜ë©´ condaê°€ ìë™ìœ¼ë¡œ dependency ì¶©ëŒì„ ê²€ì‚¬í•´ ì¤ë‹ˆë‹¤.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><a style="outline: none; text-decoration:none; color:inherit" href="#1">1</a>
</span><span class="lnt" id="2"><a style="outline: none; text-decoration:none; color:inherit" href="#2">2</a>
</span><span class="lnt" id="3"><a style="outline: none; text-decoration:none; color:inherit" href="#3">3</a>
</span><span class="lnt" id="4"><a style="outline: none; text-decoration:none; color:inherit" href="#4">4</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">conda activate testEnv

<span class="c1">#For example,</span>
conda install -c conda-forge <span class="nv">lightgbm</span><span class="o">==</span>2.0.7 scikit-learn matplotlib keras
</code></pre></td></tr></table>
</div>
</div><p>ë˜ëŠ” userê°€ ì‚¬ìš©í•  ì¤‘ìš”í•œ íŒ¨í‚¤ì§€ë“¤ì´ ìˆì„ ê²½ìš° environmentë¥¼ ìƒì„±í•  ë•Œ ì‚¬ìš©í•  íŒ¨í‚¤ì§€ ëª©ë¡ì„ ì§€ì •í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.
ì•„ë˜ ì»¤ë§¨ë“œë¡œ ì„¤ì¹˜ëœ íŒ¨í‚¤ì§€ ëª©ë¡ì„ í™•ì¸í•©ë‹ˆë‹¤.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><a style="outline: none; text-decoration:none; color:inherit" href="#1">1</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">conda list
</code></pre></td></tr></table>
</div>
</div><p>Environmentë¥¼ ì§€ìš°ë ¤ë©´ ì•„ë˜ ì»¤ë§¨ë“œë¥¼ ì…ë ¥í•©ë‹ˆë‹¤.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><a style="outline: none; text-decoration:none; color:inherit" href="#1">1</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">conda remove --name testEnv --all
</code></pre></td></tr></table>
</div>
</div><h3 id="2-cpu-compute-nodeì—-localê³¼-ë™ì¼í•œ-conda-environment-êµ¬ì¶•í•˜ê¸°">2. <code>cpu-compute</code> nodeì— localê³¼ ë™ì¼í•œ conda environment êµ¬ì¶•í•˜ê¸°<a hidden class="anchor" aria-hidden="true" href="#2-cpu-compute-nodeì—-localê³¼-ë™ì¼í•œ-conda-environment-êµ¬ì¶•í•˜ê¸°">#</a></h3>
<p><strong>conda env export</strong> ì»¤ë§¨ë“œë¥¼ ì´ìš©í•´ environment ì „ì²´ë¥¼ <code>.yml</code> íŒŒì¼ë¡œ ë§Œë“¤ê³  ì´ë¥¼ ì´ìš©í•´ <code>cpu-compute</code> ë…¸ë“œì—ì„œ environmentë¥¼ êµ¬ì¶•í•˜ëŠ” ê²ƒì´ ë™ì¼í•œ environmentë¥¼ ë§Œë“œëŠ” ê°€ì¥ ì´ìƒì ì¸ ë°©ë²•ì…ë‹ˆë‹¤. ë˜ëŠ” ì„¤ì¹˜ëœ íŒ¨í‚¤ì§€ ëª©ë¡ê³¼ ë²„ì „ë§Œì„ <code>requirements.txt</code>ë¡œ ì¶”ì¶œí•˜ì—¬ ë…¸ë“œì—ì„œ <code>cpu-compute</code>ì—ì„œ ì„¤ì¹˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ì´ ë‘ ë°©ë²•ì€ userì˜ local ì»´í“¨í„°ê°€ linuxê°€ ì•„ë‹ˆë©´ ì˜¤ë¥˜ê°€ ë°œìƒí•  í™•ë¥ ì´ ë§¤ìš° ë†’ìŠµë‹ˆë‹¤. ì´ëŠ” ìœ ì €ê°€ íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•  ë•Œ ìë™ìœ¼ë¡œ ì„¤ì¹˜ë˜ëŠ” dependencyë“¤ì˜ ë²„ì „ì´ OSë³„ë¡œ ë‹¤ë¥¼ ìˆ˜ ìˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ <code>lightgbm</code> 2.0.7ë²„ì „ì€ Python ë²„ì „ì´ 3.6ì¼ ë•Œ linuxì™€ MacOSì—ì„œ ë‘˜ ë‹¤ ì„¤ì¹˜ ê°€ëŠ¥í•˜ì§€ë§Œ, ì´ íŒ¨í‚¤ì§€ì˜ dependency ì¤‘ í•˜ë‚˜ì¸ <code>libgfortran</code>ì€ MacOSì—ì„œëŠ” 4.0.0ë²„ì „ì´ ì„¤ì¹˜ë˜ì§€ë§Œ linuxì—ì„œëŠ” 3.0.0ë²„ì „ê¹Œì§€ë§Œ ì§€ì›ë˜ê¸° ë•Œë¬¸ì— MacOSì—ì„œ ë§Œë“  environmentì—ì„œ ì¶”ì¶œí•œ yml íŒŒì¼ì´ë‚˜ list txt íŒŒì¼ì„ í´ëŸ¬ìŠ¤í„°ì—ì„œ ì‚¬ìš©í•˜ë©´ ì˜¤ë¥˜ê°€ ë°œìƒí•©ë‹ˆë‹¤[^fn2]. ì´ ì˜¤ë¥˜ëŠ” ì ì ˆí•œ ì¡°ì¹˜ë¥¼ í†µí•´ í•´ê²°í•  ìˆ˜ ìˆì„ ë•Œë„ ìˆì§€ë§Œ í•´ê²°í•˜ê¸° í˜ë“¤ ë•Œë„ ìˆìŠµë‹ˆë‹¤.</p>
<p>ë”°ë¼ì„œ localì—ì„œ ë§Œë“  environmentë¥¼ clusterë¡œ ì˜®ê¸°ê¸°ë³´ë‹¤ëŠ”, localì˜ environmentì—ì„œ ì‚¬ìš©í•˜ëŠ” Python ë²„ì „ê³¼ ì¤‘ìš” íŒ¨í‚¤ì§€ë“¤ì˜ ë²„ì „ì„ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•˜ì—¬ cluster ë‚´ì—ì„œ environmentë¥¼ ìƒì„±í•˜ëŠ” ê²ƒì„ ì¶”ì²œí•˜ë©°, ì´ ë¬¸ì„œì—ì„œëŠ” ê·¸ ì ˆì°¨ë¥¼ ì•ˆë‚´í•©ë‹ˆë‹¤.</p>
<ol>
<li>
<p>Conda environment ìƒì„± batch scriptë¥¼ ì‘ì„±í•©ë‹ˆë‹¤.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><a style="outline: none; text-decoration:none; color:inherit" href="#1"> 1</a>
</span><span class="lnt" id="2"><a style="outline: none; text-decoration:none; color:inherit" href="#2"> 2</a>
</span><span class="lnt" id="3"><a style="outline: none; text-decoration:none; color:inherit" href="#3"> 3</a>
</span><span class="lnt" id="4"><a style="outline: none; text-decoration:none; color:inherit" href="#4"> 4</a>
</span><span class="lnt" id="5"><a style="outline: none; text-decoration:none; color:inherit" href="#5"> 5</a>
</span><span class="lnt" id="6"><a style="outline: none; text-decoration:none; color:inherit" href="#6"> 6</a>
</span><span class="lnt" id="7"><a style="outline: none; text-decoration:none; color:inherit" href="#7"> 7</a>
</span><span class="lnt" id="8"><a style="outline: none; text-decoration:none; color:inherit" href="#8"> 8</a>
</span><span class="lnt" id="9"><a style="outline: none; text-decoration:none; color:inherit" href="#9"> 9</a>
</span><span class="lnt" id="10"><a style="outline: none; text-decoration:none; color:inherit" href="#10">10</a>
</span><span class="lnt" id="11"><a style="outline: none; text-decoration:none; color:inherit" href="#11">11</a>
</span><span class="lnt" id="12"><a style="outline: none; text-decoration:none; color:inherit" href="#12">12</a>
</span><span class="lnt" id="13"><a style="outline: none; text-decoration:none; color:inherit" href="#13">13</a>
</span><span class="lnt" id="14"><a style="outline: none; text-decoration:none; color:inherit" href="#14">14</a>
</span><span class="lnt" id="15"><a style="outline: none; text-decoration:none; color:inherit" href="#15">15</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="cp">#!/bin/bash
</span><span class="cp"></span><span class="c1">#SBATCH --job-name=conda-env-create</span>
<span class="c1">#SBATCH --nodes=1</span>
<span class="c1">#SBATCH --mem=4gb</span>
<span class="c1">#SBATCH --partition=all</span>
<span class="c1">#SBATCH --nodelist=cpu-compute</span>
<span class="c1">#SBATCH --output=testEnv.out</span>
<span class="c1">#SBATCH --error=testEnv.err</span>
<span class="nv">CONDA_BIN_PATH</span><span class="o">=</span>/opt/miniconda/bin
<span class="nv">ENV_NAME</span><span class="o">=</span>testEnv <span class="c1">#localì—ì„œì™€ ê°™ì€ ì´ë¦„ìœ¼ë¡œ ì…ë ¥</span>
<span class="nv">ENV_PATH</span><span class="o">=</span>/mnt/nas/users/<span class="k">$(</span>whoami<span class="k">)</span>/.conda/envs/<span class="nv">$ENV_NAME</span>
<span class="nv">$CONDA_BIN_PATH</span>/conda env remove --prefix <span class="nv">$ENV_PATH</span>
<span class="nv">$CONDA_BIN_PATH</span>/conda create -y --prefix <span class="nv">$ENV_PATH</span> <span class="nv">python</span><span class="o">=</span>3.6 
<span class="nb">source</span> <span class="nv">$CONDA_BIN_PATH</span>/activate <span class="nv">$ENV_PATH</span>
conda install -c conda-forge <span class="nv">lightgbm</span><span class="o">==</span>2.0.7 scikit-learn matplotlib keras pandas numpy
</code></pre></td></tr></table>
</div>
</div><p>ìœ„ ë‚´ìš©ì—ì„œ</p>
<ul>
<li>7ë²ˆ ë¼ì¸ì˜ <strong>#SBATCH &ndash;output=testEnv.out</strong>ì˜ output log íŒŒì¼ëª…</li>
<li>8ë²ˆ ë¼ì¸ì˜ <strong>#SBATCH &ndash;error=testEnv.err</strong>ì˜ error log íŒŒì¼ëª…</li>
<li>10ë²ˆ ë¼ì¸ì˜ environment name</li>
<li>13ë²ˆ ë¼ì¸ì˜ python version</li>
<li>14ë²ˆ ë¼ì¸ì˜ íŒ¨í‚¤ì§€ ì„¤ì¹˜ ì»¤ë§¨ë“œ
ë¥¼ ì•Œë§ê²Œ ìˆ˜ì •í•œ ë’¤  localì—ì„œ <code>testEnv.sh</code>ë¡œ ì €ì¥í•˜ì—¬ <code>scp</code>ë¡œ í´ëŸ¬ìŠ¤í„° ë‚´ user home directoryë¡œ ì „ì†¡í•©ë‹ˆë‹¤. ë˜ëŠ” proxy nodeì— ì ‘ì†í•œ ë’¤ home directoryì—ì„œ</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><a style="outline: none; text-decoration:none; color:inherit" href="#1">1</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">vi testEnv.sh
</code></pre></td></tr></table>
</div>
</div><p>ë¥¼ ì…ë ¥í•˜ì—¬ linuxì˜ í…ìŠ¤íŠ¸ ì—ë””í„°ë¥¼ ì‹¤í–‰í•œ ë’¤ <code>ctrl+v</code>ë¡œ ìœ„ ë‚´ìš©ì„ ë¶™ì—¬ë„£ê¸°í•˜ê³  <code>esc</code>, <code>:wq</code>, <code>ENTER</code>ë¥¼ ì°¨ë¡€ë¡œ ëˆŒëŸ¬ ì €ì¥í•©ë‹ˆë‹¤.</p>
</li>
<li>
<p>ì‘ì„±í•œ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰í•˜ê¸°. proxy nodeì— SSHì ‘ì†í•œ ë’¤ home directoryì—ì„œ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><a style="outline: none; text-decoration:none; color:inherit" href="#1">1</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">sbatch testEnv.sh
</code></pre></td></tr></table>
</div>
</div><p>ë¥¼ ì…ë ¥í•´ slurm batch job submissionì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. ì‘ì—…ì´ ë…¸ë“œì—ì„œ ì„±ê³µì ìœ¼ë¡œ ì‹¤í–‰ë˜ë©´</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><a style="outline: none; text-decoration:none; color:inherit" href="#1">1</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text">Submitted batch job 401
</code></pre></td></tr></table>
</div>
</div><p>ì™€ ê°™ì€ ë©”ì‹œì§€ê°€ ëœ¨ê³  job ë²ˆí˜¸ê°€ í• ë‹¹ë©ë‹ˆë‹¤.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><a style="outline: none; text-decoration:none; color:inherit" href="#1">1</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">squeue
</code></pre></td></tr></table>
</div>
</div><p>ì»¤ë§¨ë“œë¥¼ í†µí•´ ì‘ì—… ì‹¤í–‰ í˜„í™©ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><a style="outline: none; text-decoration:none; color:inherit" href="#1">1</a>
</span><span class="lnt" id="2"><a style="outline: none; text-decoration:none; color:inherit" href="#2">2</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text">JOBID PARTITION     NAME     USER ST    TIME  NODES NODELIST(REASON)
402     all       conda-en    mjm  R    0:01    1  cpu-compute
</code></pre></td></tr></table>
</div>
</div><p>ë˜ëŠ” ì•„ë˜ ì»¤ë§¨ë“œë¥¼ í†µí•´ ì‹¤ì‹œê°„ìœ¼ë¡œ ì‘ì—… ì‹¤í–‰ í˜„í™©ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><a style="outline: none; text-decoration:none; color:inherit" href="#1">1</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">smap -i <span class="m">1</span>
</code></pre></td></tr></table>
</div>
</div><p>ë‹¤ìŒ ì»¤ë§¨ë“œë¥¼ í†µí•´ output log, error logíŒŒì¼ì˜ ë‚´ìš©ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><a style="outline: none; text-decoration:none; color:inherit" href="#1">1</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">cat testEnv.err
</code></pre></td></tr></table>
</div>
</div><p>error log ë˜ëŠ” output logëŠ” ë‹¤ìŒ ì»¤ë§¨ë“œë¥¼ í†µí•´ ì‹¤ì‹œê°„ìœ¼ë¡œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><a style="outline: none; text-decoration:none; color:inherit" href="#1">1</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">tail -f testEnv.out
</code></pre></td></tr></table>
</div>
</div></li>
</ol>
<h2 id="step-2-make-env-file-and-upload-file-to-users-workspace">Step 2. make env file and upload file to userâ€™s workspace<a hidden class="anchor" aria-hidden="true" href="#step-2-make-env-file-and-upload-file-to-users-workspace">#</a></h2>
<p>localì—ì„œ ë§Œë“¤ì–´ì§„ env íŒŒì¼ì„ ì„œë²„ë¡œ ì˜®ê¸¸ ë•ŒëŠ” <strong>scp</strong>ë¥¼ ì‚¬ìš©í•œë‹¤. ê°„ë‹¨í•œ ì‚¬ìš©ë²•ì€ ì•„ë˜ì™€ ê°™ë‹¤.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><a style="outline: none; text-decoration:none; color:inherit" href="#1">1</a>
</span><span class="lnt" id="2"><a style="outline: none; text-decoration:none; color:inherit" href="#2">2</a>
</span><span class="lnt" id="3"><a style="outline: none; text-decoration:none; color:inherit" href="#3">3</a>
</span><span class="lnt" id="4"><a style="outline: none; text-decoration:none; color:inherit" href="#4">4</a>
</span><span class="lnt" id="5"><a style="outline: none; text-decoration:none; color:inherit" href="#5">5</a>
</span><span class="lnt" id="6"><a style="outline: none; text-decoration:none; color:inherit" href="#6">6</a>
</span><span class="lnt" id="7"><a style="outline: none; text-decoration:none; color:inherit" href="#7">7</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># scp ì‚¬ìš©ë²•</span>
<span class="c1"># File upload</span>
scp <span class="o">[</span>FILEPATH<span class="o">]</span> ghk@<span class="o">[</span>IP address<span class="o">]</span>:~/ <span class="c1"># upload from local, ~/ means home directory</span>
<span class="c1"># File download</span>
scp ghk@<span class="o">[</span>IP address<span class="o">]</span>:<span class="o">[</span>FILEPATH<span class="o">]</span> ./ <span class="c1"># scp [server file path] [local save path]</span>

<span class="c1"># directory ì „ì²´ ë‹¤ìš´, ì—…ë¡œë“œ í•  ë•ŒëŠ” -r ì˜µì…˜ì„ ì‚¬ìš©í•œë‹¤.</span>
</code></pre></td></tr></table>
</div>
</div><p>Windows ì‚¬ìš©ìë¼ë©´ <strong><a href="https://winscp.net/eng/download.php">WinSCP</a></strong> ë¼ëŠ” ì´ë¦„ì˜ í”„ë¡œê·¸ë¨ì„ ì‚¬ìš©í•˜ë©´ localê³¼ ì„œë²„ ê°„ íŒŒì¼ ì „ì†¡ì„ ë³´ë‹¤ ì‰½ê²Œ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤.</p>
<aside>
ğŸ’¡ env fileì„ ì´ìš©í•œ conda í™˜ê²½ ì„¤ì •ì€ localê³¼ ì„œë²„ ì‘ì—… í™˜ê²½ì„ ë™ì¼í•˜ê²Œ ì„¤ì •í•  ìˆ˜ ìˆëŠ” ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì´ë‹¤. ê·¸ëŸ¬ë‚˜ conda í™˜ê²½ ì„¤ì • ê³¼ì •ì´ ë„ˆë¬´ ë²ˆê±°ë¡­ë‹¤ë©´ requirements.txtë¥¼ ë§Œë“¤ì–´ íŒ¨í‚¤ì§€ ë²„ì „ë§Œ ê´€ë¦¬í•´ë„ ì¶©ëŒì„ ë°©ì§€í•  ìˆ˜ ìˆë‹¤.
</aside>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><a style="outline: none; text-decoration:none; color:inherit" href="#1">1</a>
</span><span class="lnt" id="2"><a style="outline: none; text-decoration:none; color:inherit" href="#2">2</a>
</span><span class="lnt" id="3"><a style="outline: none; text-decoration:none; color:inherit" href="#3">3</a>
</span><span class="lnt" id="4"><a style="outline: none; text-decoration:none; color:inherit" href="#4">4</a>
</span><span class="lnt" id="5"><a style="outline: none; text-decoration:none; color:inherit" href="#5">5</a>
</span><span class="lnt" id="6"><a style="outline: none; text-decoration:none; color:inherit" href="#6">6</a>
</span><span class="lnt" id="7"><a style="outline: none; text-decoration:none; color:inherit" href="#7">7</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">conda install --force-reinstall -y -q -c conda-forge --file requirements.txt

<span class="c1"># --force-reinstall : Install the package even if it already exists.</span>
<span class="c1"># -y : Yes, do not ask for confirmation.</span>
<span class="c1"># -q : Quiet, do not display progress bar.</span>
<span class="c1"># -c : Channels, additional channels to search for packages</span>
<span class="c1"># conda-forge is recommended</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="step-3-make-slrum-batch-script-and-run-code-in-server">Step 3. make SLRUM batch script and run code in server<a hidden class="anchor" aria-hidden="true" href="#step-3-make-slrum-batch-script-and-run-code-in-server">#</a></h2>
<p>ì•ì„  ë‹¨ê³„ì—ì„œ condaí™˜ê²½ì´ ì˜ ë§Œë“¤ì–´ì¡Œë‹¤ë©´ í•´ë‹¹ ê°€ìƒí™˜ê²½ì„ activateí•˜ì—¬ ì½”ë“œë¥¼ ëŒë¦¬ëŠ” SLURM batch scriptë¥¼ ì‘ì„±í•  ìˆ˜ ìˆë‹¤. ì‚¬ìš©ìë“¤ì˜ ì´í•´ë¥¼ ë•ê¸° ìœ„í•´ TensorFlow ê³µì‹ í˜ì´ì§€ì— ê²Œì‹œëœ <a href="https://www.tensorflow.org/tutorials/quickstart/beginner?hl=ko">ì´ˆë³´ììš© íŠœí† ë¦¬ì–¼</a> ì½”ë“œë¥¼ SLURMì„ í†µí•´ ì‹¤í–‰ì‹œí‚¤ëŠ” ì˜ˆì œë¥¼ ê³µìœ í•œë‹¤. ë¨¼ì €, íŠœí† ë¦¬ì–¼ ì½”ë“œëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><a style="outline: none; text-decoration:none; color:inherit" href="#1"> 1</a>
</span><span class="lnt" id="2"><a style="outline: none; text-decoration:none; color:inherit" href="#2"> 2</a>
</span><span class="lnt" id="3"><a style="outline: none; text-decoration:none; color:inherit" href="#3"> 3</a>
</span><span class="lnt" id="4"><a style="outline: none; text-decoration:none; color:inherit" href="#4"> 4</a>
</span><span class="lnt" id="5"><a style="outline: none; text-decoration:none; color:inherit" href="#5"> 5</a>
</span><span class="lnt" id="6"><a style="outline: none; text-decoration:none; color:inherit" href="#6"> 6</a>
</span><span class="lnt" id="7"><a style="outline: none; text-decoration:none; color:inherit" href="#7"> 7</a>
</span><span class="lnt" id="8"><a style="outline: none; text-decoration:none; color:inherit" href="#8"> 8</a>
</span><span class="lnt" id="9"><a style="outline: none; text-decoration:none; color:inherit" href="#9"> 9</a>
</span><span class="lnt" id="10"><a style="outline: none; text-decoration:none; color:inherit" href="#10">10</a>
</span><span class="lnt" id="11"><a style="outline: none; text-decoration:none; color:inherit" href="#11">11</a>
</span><span class="lnt" id="12"><a style="outline: none; text-decoration:none; color:inherit" href="#12">12</a>
</span><span class="lnt" id="13"><a style="outline: none; text-decoration:none; color:inherit" href="#13">13</a>
</span><span class="lnt" id="14"><a style="outline: none; text-decoration:none; color:inherit" href="#14">14</a>
</span><span class="lnt" id="15"><a style="outline: none; text-decoration:none; color:inherit" href="#15">15</a>
</span><span class="lnt" id="16"><a style="outline: none; text-decoration:none; color:inherit" href="#16">16</a>
</span><span class="lnt" id="17"><a style="outline: none; text-decoration:none; color:inherit" href="#17">17</a>
</span><span class="lnt" id="18"><a style="outline: none; text-decoration:none; color:inherit" href="#18">18</a>
</span><span class="lnt" id="19"><a style="outline: none; text-decoration:none; color:inherit" href="#19">19</a>
</span><span class="lnt" id="20"><a style="outline: none; text-decoration:none; color:inherit" href="#20">20</a>
</span><span class="lnt" id="21"><a style="outline: none; text-decoration:none; color:inherit" href="#21">21</a>
</span><span class="lnt" id="22"><a style="outline: none; text-decoration:none; color:inherit" href="#22">22</a>
</span><span class="lnt" id="23"><a style="outline: none; text-decoration:none; color:inherit" href="#23">23</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="c1"># tensor.py</span>

<span class="kn">import</span> <span class="nn">tensorflow</span> <span class="k">as</span> <span class="nn">tf</span>

<span class="n">mnist</span> <span class="o">=</span> <span class="n">tf</span><span class="o">.</span><span class="n">keras</span><span class="o">.</span><span class="n">datasets</span><span class="o">.</span><span class="n">mnist</span>

<span class="p">(</span><span class="n">x_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">),</span> <span class="p">(</span><span class="n">x_test</span><span class="p">,</span> <span class="n">y_test</span><span class="p">)</span> <span class="o">=</span> <span class="n">mnist</span><span class="o">.</span><span class="n">load_data</span><span class="p">()</span>
<span class="n">x_train</span><span class="p">,</span> <span class="n">x_test</span> <span class="o">=</span> <span class="n">x_train</span> <span class="o">/</span> <span class="mf">255.0</span><span class="p">,</span> <span class="n">x_test</span> <span class="o">/</span> <span class="mf">255.0</span>

<span class="n">model</span> <span class="o">=</span> <span class="n">tf</span><span class="o">.</span><span class="n">keras</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">Sequential</span><span class="p">([</span>
  <span class="n">tf</span><span class="o">.</span><span class="n">keras</span><span class="o">.</span><span class="n">layers</span><span class="o">.</span><span class="n">Flatten</span><span class="p">(</span><span class="n">input_shape</span><span class="o">=</span><span class="p">(</span><span class="mi">28</span><span class="p">,</span> <span class="mi">28</span><span class="p">)),</span>
  <span class="n">tf</span><span class="o">.</span><span class="n">keras</span><span class="o">.</span><span class="n">layers</span><span class="o">.</span><span class="n">Dense</span><span class="p">(</span><span class="mi">128</span><span class="p">,</span> <span class="n">activation</span><span class="o">=</span><span class="s1">&#39;relu&#39;</span><span class="p">),</span>
  <span class="n">tf</span><span class="o">.</span><span class="n">keras</span><span class="o">.</span><span class="n">layers</span><span class="o">.</span><span class="n">Dropout</span><span class="p">(</span><span class="mf">0.2</span><span class="p">),</span>
  <span class="n">tf</span><span class="o">.</span><span class="n">keras</span><span class="o">.</span><span class="n">layers</span><span class="o">.</span><span class="n">Dense</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">activation</span><span class="o">=</span><span class="s1">&#39;softmax&#39;</span><span class="p">)</span>
<span class="p">])</span>

<span class="n">model</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">optimizer</span><span class="o">=</span><span class="s1">&#39;adam&#39;</span><span class="p">,</span>
              <span class="n">loss</span><span class="o">=</span><span class="s1">&#39;sparse_categorical_crossentropy&#39;</span><span class="p">,</span>
              <span class="n">metrics</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;accuracy&#39;</span><span class="p">])</span>

<span class="n">model</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">x_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">,</span> <span class="n">epochs</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>

<span class="n">model</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span><span class="n">x_test</span><span class="p">,</span>  <span class="n">y_test</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><a style="outline: none; text-decoration:none; color:inherit" href="#1"> 1</a>
</span><span class="lnt" id="2"><a style="outline: none; text-decoration:none; color:inherit" href="#2"> 2</a>
</span><span class="lnt" id="3"><a style="outline: none; text-decoration:none; color:inherit" href="#3"> 3</a>
</span><span class="lnt" id="4"><a style="outline: none; text-decoration:none; color:inherit" href="#4"> 4</a>
</span><span class="lnt" id="5"><a style="outline: none; text-decoration:none; color:inherit" href="#5"> 5</a>
</span><span class="lnt" id="6"><a style="outline: none; text-decoration:none; color:inherit" href="#6"> 6</a>
</span><span class="lnt" id="7"><a style="outline: none; text-decoration:none; color:inherit" href="#7"> 7</a>
</span><span class="lnt" id="8"><a style="outline: none; text-decoration:none; color:inherit" href="#8"> 8</a>
</span><span class="lnt" id="9"><a style="outline: none; text-decoration:none; color:inherit" href="#9"> 9</a>
</span><span class="lnt" id="10"><a style="outline: none; text-decoration:none; color:inherit" href="#10">10</a>
</span><span class="lnt" id="11"><a style="outline: none; text-decoration:none; color:inherit" href="#11">11</a>
</span><span class="lnt" id="12"><a style="outline: none; text-decoration:none; color:inherit" href="#12">12</a>
</span><span class="lnt" id="13"><a style="outline: none; text-decoration:none; color:inherit" href="#13">13</a>
</span><span class="lnt" id="14"><a style="outline: none; text-decoration:none; color:inherit" href="#14">14</a>
</span><span class="lnt" id="15"><a style="outline: none; text-decoration:none; color:inherit" href="#15">15</a>
</span><span class="lnt" id="16"><a style="outline: none; text-decoration:none; color:inherit" href="#16">16</a>
</span><span class="lnt" id="17"><a style="outline: none; text-decoration:none; color:inherit" href="#17">17</a>
</span><span class="lnt" id="18"><a style="outline: none; text-decoration:none; color:inherit" href="#18">18</a>
</span><span class="lnt" id="19"><a style="outline: none; text-decoration:none; color:inherit" href="#19">19</a>
</span><span class="lnt" id="20"><a style="outline: none; text-decoration:none; color:inherit" href="#20">20</a>
</span><span class="lnt" id="21"><a style="outline: none; text-decoration:none; color:inherit" href="#21">21</a>
</span><span class="lnt" id="22"><a style="outline: none; text-decoration:none; color:inherit" href="#22">22</a>
</span><span class="lnt" id="23"><a style="outline: none; text-decoration:none; color:inherit" href="#23">23</a>
</span><span class="lnt" id="24"><a style="outline: none; text-decoration:none; color:inherit" href="#24">24</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="cp">#!/bin/bash
</span><span class="cp"></span><span class="c1">#</span>
<span class="c1">#SBATCH --job-name=gpu-tensor-test</span>
<span class="c1">#SBATCH --mem=4gb</span>
<span class="c1">#SBATCH --nodelist=gpu-compute</span>
<span class="c1">#SBATCH --ntasks=1</span>
<span class="c1">#SBATCH --cpus-per-task=1</span>
<span class="c1">#SBATCH --gres=gpu:1</span>
<span class="c1">#SBATCH --time=00:20:00</span>
<span class="c1">#SBATCH --account=ghk</span>
<span class="c1">#SBATCH --partition=all</span>
<span class="c1">#SBATCH --output=/mnt/nas/users/ghk/code/gputest.log</span>

<span class="nv">CONDA_BIN_PATH</span><span class="o">=</span>/opt/miniconda/bin
<span class="nv">ENV_NAME</span><span class="o">=</span>tensor
<span class="nv">ENV_PATH</span><span class="o">=</span>/mnt/nas/users/<span class="k">$(</span>whoami<span class="k">)</span>/.conda/envs/<span class="nv">$ENV_NAME</span>

<span class="c1">## $CONDA_BIN_PATH/conda env remove --prefix $ENV_PATH</span>
<span class="c1">## $CONDA_BIN_PATH/conda create -y --prefix $ENV_PATH python=3.8 tensorflow pandas numpy</span>

<span class="nb">source</span> <span class="nv">$CONDA_BIN_PATH</span>/activate <span class="nv">$ENV_PATH</span>
<span class="c1">## pip uninstall keras</span>
<span class="c1">## pip install keras==2.6.0</span>
python /mnt/nas/users/ghk/code/tensor.py
</code></pre></td></tr></table>
</div>
</div><ul>
<li><strong>â€”job-name</strong>: ìˆ˜í–‰í•  ì‘ì—…ì˜ ì´ë¦„</li>
<li><strong>â€”mem</strong>: memory limit</li>
<li><strong>â€”nodelist</strong>: ì‘ì—…í•  ë…¸ë“œì˜ ì´ë¦„</li>
<li><strong>â€”ntasks</strong>: ì‘ì—…ì˜ ìˆ˜</li>
<li><strong>â€”cpus-per-task</strong>: ê° ì‘ì—…ì—ì„œ ì‚¬ìš©í•  cpu ì½”ì–´ì˜ ìˆ˜</li>
<li><strong>â€”gres=gpu</strong> : ì‘ì—…ì—ì„œ ì‚¬ìš©í•  gpuì˜ ê°œìˆ˜, gpu-compute ë…¸ë“œì—ëŠ” ì´ 2ê°œì˜ gpuê°€ ì‚¬ìš© ê°€ëŠ¥í•˜ë‹¤.</li>
<li><strong>â€”time</strong>: ì‘ì—… ì œí•œì‹œê°„</li>
<li><strong>â€”accoun</strong>t: í•´ë‹¹ ì‘ì—…ì„ ìˆ˜í–‰í•˜ëŠ” ê³„ì •ì˜ ì´ë¦„</li>
<li><strong>â€”partition</strong>: group of nodes with specific characteristics</li>
<li><strong>â€”output</strong>: ì½”ë“œ ì‹¤í–‰ ê²°ê³¼ log</li>
</ul>
<p>ì œì‹œí•œ ëŒ€ë¡œ python íŒŒì¼ê³¼ batch script íŒŒì¼ì´ ì˜ ë§Œë“¤ì–´ì¡Œë‹¤ë©´ <strong>sbatch</strong> ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•˜ì—¬ ê³„ì‚°ì„ ì‹¤í–‰í•  ìˆ˜ ìˆë‹¤.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><a style="outline: none; text-decoration:none; color:inherit" href="#1">1</a>
</span><span class="lnt" id="2"><a style="outline: none; text-decoration:none; color:inherit" href="#2">2</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">sbatch tensor.sh
smap -i <span class="m">1</span> <span class="c1"># ì‘ì—… í˜„í™©ì„ 1ì´ˆë§ˆë‹¤ ê°±ì‹ í•˜ì—¬ ë³´ì—¬ì¤€ë‹¤. ctrl+cë¡œ escape í•  ìˆ˜ ìˆë‹¤.</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><a style="outline: none; text-decoration:none; color:inherit" href="#1"> 1</a>
</span><span class="lnt" id="2"><a style="outline: none; text-decoration:none; color:inherit" href="#2"> 2</a>
</span><span class="lnt" id="3"><a style="outline: none; text-decoration:none; color:inherit" href="#3"> 3</a>
</span><span class="lnt" id="4"><a style="outline: none; text-decoration:none; color:inherit" href="#4"> 4</a>
</span><span class="lnt" id="5"><a style="outline: none; text-decoration:none; color:inherit" href="#5"> 5</a>
</span><span class="lnt" id="6"><a style="outline: none; text-decoration:none; color:inherit" href="#6"> 6</a>
</span><span class="lnt" id="7"><a style="outline: none; text-decoration:none; color:inherit" href="#7"> 7</a>
</span><span class="lnt" id="8"><a style="outline: none; text-decoration:none; color:inherit" href="#8"> 8</a>
</span><span class="lnt" id="9"><a style="outline: none; text-decoration:none; color:inherit" href="#9"> 9</a>
</span><span class="lnt" id="10"><a style="outline: none; text-decoration:none; color:inherit" href="#10">10</a>
</span><span class="lnt" id="11"><a style="outline: none; text-decoration:none; color:inherit" href="#11">11</a>
</span><span class="lnt" id="12"><a style="outline: none; text-decoration:none; color:inherit" href="#12">12</a>
</span><span class="lnt" id="13"><a style="outline: none; text-decoration:none; color:inherit" href="#13">13</a>
</span><span class="lnt" id="14"><a style="outline: none; text-decoration:none; color:inherit" href="#14">14</a>
</span><span class="lnt" id="15"><a style="outline: none; text-decoration:none; color:inherit" href="#15">15</a>
</span><span class="lnt" id="16"><a style="outline: none; text-decoration:none; color:inherit" href="#16">16</a>
</span><span class="lnt" id="17"><a style="outline: none; text-decoration:none; color:inherit" href="#17">17</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ghk@proxy:~/code$ cat gputest.log
2022-03-15 14:27:34.877232: I tensorflow/core/platform/cpu_feature_guard.cc:142<span class="o">]</span> This TensorFlow binary is optimized with oneAPI Deep Neural Network Library <span class="o">(</span>oneDNN<span class="o">)</span> to use the following CPU instructions in performance-critical operations:  SSE4.1 SSE4.2 AVX AVX2 AVX512F FMA
To <span class="nb">enable</span> them in other operations, rebuild TensorFlow with the appropriate compiler flags.
2022-03-15 14:27:34.887611: I tensorflow/core/common_runtime/process_util.cc:146<span class="o">]</span> Creating new thread pool with default inter op setting: 2. Tune using inter_op_parallelism_threads <span class="k">for</span> best performance.
2022-03-15 14:27:38.063857: I tensorflow/compiler/mlir/mlir_graph_optimization_pass.cc:185<span class="o">]</span> None of the MLIR Optimization Passes are enabled <span class="o">(</span>registered 2<span class="o">)</span>
Epoch 1/5
1875/1875 <span class="o">[==============================]</span> - 36s 19ms/step - loss: 0.2993 - accuracy: 0.9140
Epoch 2/5
1875/1875 <span class="o">[==============================]</span> - 18s 10ms/step - loss: 0.1436 - accuracy: 0.9575
Epoch 3/5
1875/1875 <span class="o">[==============================]</span> - 17s 9ms/step - loss: 0.1080 - accuracy: 0.9675
Epoch 4/5
1875/1875 <span class="o">[==============================]</span> - 19s 10ms/step - loss: 0.0866 - accuracy: 0.9739
Epoch 5/5
1875/1875 <span class="o">[==============================]</span> - 52s 28ms/step - loss: 0.0750 - accuracy: 0.9762
313/313 - 4s - loss: 0.0782 - accuracy: 0.9779
<span class="o">[</span>0.078231580555439, 0.9779000282287598<span class="o">]</span>
</code></pre></td></tr></table>
</div>
</div><p>SLURM batch scriptë¥¼ ì‚¬ìš©ìë“¤ì´ ë³´ë‹¤ í¸í•˜ê²Œ ë§Œë“¤ ìˆ˜ ìˆë„ë¡ <a href="https://hpc.stat.yonsei.ac.kr/tools/job-configurator.html">SLURM Job Configurator</a> ë¥¼ ìƒˆë¡­ê²Œ ì‘ì„±í•˜ì˜€ë‹¤. ì‚¬ìš©ìë“¤ì€ gpu ì˜µì…˜ì„ ì²´í¬í•˜ê±°ë‚˜ í•´ì œí•˜ì—¬ gpu-compute node ì‚¬ìš© ì—¬ë¶€ë¥¼ ê²°ì •í•  ìˆ˜ ìˆë‹¤. í•´ë‹¹ë˜ëŠ” ì˜µì…˜ì„ ì²´í¬í•˜ê³  <strong>Print</strong> ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ì†ì‰½ê²Œ batch scriptë¥¼ ì‘ì„±í•  ìˆ˜ ìˆë‹¤.</p>
<h2 id="ë”-ì•Œì•„ë³´ê¸°">ë” ì•Œì•„ë³´ê¸°<a hidden class="anchor" aria-hidden="true" href="#ë”-ì•Œì•„ë³´ê¸°">#</a></h2>
<p><a href="https://ubccr.freshdesk.com/support/solutions/articles/5000688140-submitting-a-slurm-job-script">Submitting a slurm job script</a></p>
<p><a href="https://doc.zih.tu-dresden.de/jobs_and_resources/slurm_examples/">SLRUM Job Examples</a></p>
<p><a href="https://researchcomputing.princeton.edu/support/knowledge-base/tensorflow">TensorFlow on the HPC Clusters</a></p>
<h1 id="refernece">Refernece<a hidden class="anchor" aria-hidden="true" href="#refernece">#</a></h1>


  </div>

  <footer class="post-footer">
<nav class="paginav">
  <a class="prev" href="https://hpc.stat.yonsei.ac.kr/docs/conda_env_export_yml/">
    <span class="title">Â« Prev Page</span>
    <br>
    <span>How to Use GPU Node for SLURM</span>
  </a>
  <a class="next" href="https://hpc.stat.yonsei.ac.kr/docs/how-to-use-gpu-node-for-slurm/">
    <span class="title">Next Page Â»</span>
    <br>
    <span>How to Use GPU Node for SLURM</span>
  </a>
</nav>

  </footer>
</article>
    </main>
    
<footer class="footer">
    <p align="center">
        <a href="http://bk21-bigdata.yonsei.ac.kr/bbs/page.php?hid=equipment">
        <img width='70%' src='https://hpc.stat.yonsei.ac.kr/images/logo.svg' alt='Yonsei BK logo'>
        </a>
        <br>
    </p>
    <span>&copy; 2022 <a href="https://hpc.stat.yonsei.ac.kr">Chili Pepper</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://git.io/hugopapermod" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerText = 'copy';

        function copyingDone() {
            copybutton.innerText = 'copied!';
            setTimeout(() => {
                copybutton.innerText = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
